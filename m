Received: with ECARTIS (v1.0.0; list linux-mips); Wed, 17 May 2006 15:34:13 +0200 (CEST)
Received: from nevyn.them.org ([66.93.172.17]:6110 "EHLO nevyn.them.org")
	by ftp.linux-mips.org with ESMTP id S8133784AbWEQNeF (ORCPT
	<rfc822;linux-mips@linux-mips.org>); Wed, 17 May 2006 15:34:05 +0200
Received: from drow by nevyn.them.org with local (Exim 4.54)
	id 1FgMA6-0000eZ-VJ; Wed, 17 May 2006 09:34:03 -0400
Date:	Wed, 17 May 2006 09:34:02 -0400
From:	Daniel Jacobowitz <dan@debian.org>
To:	Tony Lin <lin.tony@gmail.com>
Cc:	linux-mips@linux-mips.org
Subject: Re: Can't debug core files with GDB
Message-ID: <20060517133402.GA2480@nevyn.them.org>
References: <404548f40605161702y199c34a5wa89ec5f84cdeee09@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <404548f40605161702y199c34a5wa89ec5f84cdeee09@mail.gmail.com>
User-Agent: Mutt/1.5.11+cvs20060403
Return-Path: <drow@nevyn.them.org>
X-Envelope-To: <"|/home/ecartis/ecartis -s linux-mips"> (uid 0)
X-Orcpt: rfc822;linux-mips@linux-mips.org
Original-Recipient: rfc822;linux-mips@linux-mips.org
X-archive-position: 11473
X-ecartis-version: Ecartis v1.0.0
Sender: linux-mips-bounce@linux-mips.org
Errors-to: linux-mips-bounce@linux-mips.org
X-original-sender: dan@debian.org
Precedence: bulk
X-list: linux-mips

On Tue, May 16, 2006 at 05:02:35PM -0700, Tony Lin wrote:
> When I force a core file and try to debug it, I get empty values:
> 
> >./gdb ./nebtest ./core.524.nebtest
> 
> GNU gdb 6.4
> Copyright 2005 Free Software Foundation, Inc.
> GDB is free software, covered by the GNU General Public License, and you are
> welcome to change it and/or distribute copies of it under certain 
> conditions.
> Type "show copying" to see the conditions.
> There is absolutely no warranty for GDB.  Type "show warranty" for details.
> This GDB was configured as "mips-linux"...Using host libthread_db
> library "/lib/libthread_db.so.1".
> 
> Core was generated by `./nebtest'.
> Program terminated with signal 11, Segmentation fault.
> Reading symbols from /lib/libgcc_s.so.1...done.
> Loaded symbols for /lib/libgcc_s.so.1
> Reading symbols from /lib/libc.so.6...done.
> Loaded symbols for /lib/libc.so.6
> Reading symbols from /lib/ld.so.1...done.
> Loaded symbols for /lib/ld.so.1
> #0  0x00000000 in ?? ()
> (gdb) bt
> #0  0x00000000 in ?? ()
> #1  0x00000000 in ?? ()

Check the contents of the core file with objdump?  I recall seeing at
least one recent MIPS kernel which failed to save registers.  Take a
look at the .reg section.

-- 
Daniel Jacobowitz
CodeSourcery
