Received: from oss.sgi.com (localhost [127.0.0.1])
	by oss.sgi.com (8.12.3/8.12.3) with ESMTP id g4EHtAnC007114
	for <linux-mips-outgoing@oss.sgi.com>; Tue, 14 May 2002 10:55:10 -0700
Received: (from majordomo@localhost)
	by oss.sgi.com (8.12.3/8.12.3/Submit) id g4EHtA5d007113
	for linux-mips-outgoing; Tue, 14 May 2002 10:55:10 -0700
X-Authentication-Warning: oss.sgi.com: majordomo set sender to owner-linux-mips@oss.sgi.com using -f
Received: from dea.linux-mips.net (localhost [127.0.0.1])
	by oss.sgi.com (8.12.3/8.12.3) with ESMTP id g4EHt8nC007109
	for <linux-mips@oss.sgi.com>; Tue, 14 May 2002 10:55:08 -0700
Received: (from ralf@localhost)
	by dea.linux-mips.net (8.11.6/8.11.1) id g4EHtVM30814
	for linux-mips@oss.sgi.com; Tue, 14 May 2002 10:55:31 -0700
Received: from Cantor.suse.de (ns.suse.de [213.95.15.193])
	by oss.sgi.com (8.12.3/8.12.3) with SMTP id g4E9PnnC015919
	for <linux-mips@oss.sgi.com>; Tue, 14 May 2002 02:25:49 -0700
Received: from Hermes.suse.de (Charybdis.suse.de [213.95.15.201])
	by Cantor.suse.de (Postfix) with ESMTP
	id A36701E458; Tue, 14 May 2002 11:26:05 +0200 (MEST)
Date: Tue, 14 May 2002 11:26:05 +0200 (CEST)
From: Adrian Schroeter <adrian@suse.de>
Reply-To: Adrian Schroeter <adrian@suse.de>
To: linux-mips@oss.sgi.com
Cc: ralf@gnu.org, Michael Schroeder <mls@suse.de>
Subject: sgiarcs_con generic SGI console driver
Message-ID: <Pine.LNX.4.44.0205141121290.14912-200000@reiser.suse.de>
MIME-Version: 1.0
Content-Type: MULTIPART/MIXED; BOUNDARY="168484352-2043690147-1021368365=:14912"
Sender: owner-linux-mips@oss.sgi.com
Precedence: bulk

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.
  Send mail to mime@docserver.cac.washington.edu for more info.

--168484352-2043690147-1021368365=:14912
Content-Type: TEXT/PLAIN; charset=US-ASCII


Hi,

Michael Schroeder has written a console driver that only uses
functions from the ARCS prom and therefore should work on all
SGIs. The disadvantage is that it is not very fast and it needs
the RAM area reserved for the PROM. But you'll get a nice console
on IMPACT machines and other.

enjoy,
adrian

**********************************************************************
Adrian Schroeter
SuSE AG, Deutschherrnstr. 15-19, 90429 Nuernberg, Germany
email: adrian@suse.de   (296 mails already received today.)


--168484352-2043690147-1021368365=:14912
Content-Type: TEXT/PLAIN; charset=US-ASCII; name=sgiarcs_patch
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.LNX.4.44.0205141126050.14912@reiser.suse.de>
Content-Description: sgiarcs.dif
Content-Disposition: attachment; filename=sgiarcs_patch

LS0tIC4vYXJjaC9taXBzL2FyYy9hcmNfY29uLmMub3JpZwkyMDAyLTA1LTEx
IDE3OjE3OjA2LjAwMDAwMDAwMCArMDIwMA0KKysrIC4vYXJjaC9taXBzL2Fy
Yy9hcmNfY29uLmMJMjAwMi0wNS0xMSAxNzoxNzowOC4wMDAwMDAwMDAgKzAy
MDANCkBAIC0zNSw4ICszNSwxMSBAQA0KIAlyZXR1cm4gcHJvbV9nZXRjaGFy
KCk7DQogfQ0KIA0KK2V4dGVybiBpbnQgcHJvbV9tZW1vcnlfZnJlZWQ7DQor
DQogc3RhdGljIGludCBfX2luaXQgcHJvbV9jb25zb2xlX3NldHVwKHN0cnVj
dCBjb25zb2xlICpjbywgY2hhciAqb3B0aW9ucykNCiB7DQorCXByb21fbWVt
b3J5X2ZyZWVkID0gLTE7CQkvKiBuZWVkZWQgZm9yIHByb20gZnVuY3Rpb25z
ICovDQogCXJldHVybiAwOw0KIH0NCiANCi0tLSAuL2FyY2gvbWlwcy9jb25m
aWcuaW4ub3JpZwkyMDAyLTA1LTExIDE5OjA5OjU5LjAwMDAwMDAwMCArMDIw
MA0KKysrIC4vYXJjaC9taXBzL2NvbmZpZy5pbgkyMDAyLTA1LTExIDE5OjM4
OjU3LjAwMDAwMDAwMCArMDIwMA0KQEAgLTU5MCw3ICs1OTAsOCBAQA0KICAg
IGNvbW1lbnQgJ1NHSSBDaGFyYWN0ZXIgZGV2aWNlcycNCiAgICBpZiBbICIk
Q09ORklHX1ZUIiA9ICJ5IiBdOyB0aGVuDQogICAgICAgdHJpc3RhdGUgJ1NH
SSBOZXdwb3J0IENvbnNvbGUgc3VwcG9ydCcgQ09ORklHX1NHSV9ORVdQT1JU
X0NPTlNPTEUNCi0gICAgICBpZiBbICIkQ09ORklHX1NHSV9ORVdQT1JUX0NP
TlNPTEUiID0gInkiIF07IHRoZW4NCisgICAgICB0cmlzdGF0ZSAnU0dJIEFS
Q1MgQ29uc29sZSBzdXBwb3J0JyBDT05GSUdfU0dJX0FSQ1NfQ09OU09MRQ0K
KyAgICAgIGlmIFsgIiRDT05GSUdfU0dJX05FV1BPUlRfQ09OU09MRSIgPSAi
eSIgLW8gIiRDT05GSUdfU0dJX0FSQ1NfQ09OU09MRSIgPSAieSIgXTsgdGhl
bg0KIAkgZGVmaW5lX2Jvb2wgQ09ORklHX0ZPTlRfOHgxNiB5DQogICAgICAg
ZmkNCiAgICAgICBkZWZpbmVfYm9vbCBDT05GSUdfRFVNTVlfQ09OU09MRSB5
DQotLS0gLi9hcmNoL21pcHMvbW0vaW5pdC5jLm9yaWcJMjAwMi0wNS0xMSAx
NzoxNToyMi4wMDAwMDAwMDAgKzAyMDANCisrKyAuL2FyY2gvbWlwcy9tbS9p
bml0LmMJMjAwMi0wNS0xMSAxNzoxNTo0Ny4wMDAwMDAwMDAgKzAyMDANCkBA
IC0zNjAsMTEgKzM2MCwxNiBAQA0KIGV4dGVybiBjaGFyIF9faW5pdF9iZWdp
biwgX19pbml0X2VuZDsNCiBleHRlcm4gdm9pZCBwcm9tX2ZyZWVfcHJvbV9t
ZW1vcnkodm9pZCk7DQogDQoraW50CXByb21fbWVtb3J5X2ZyZWVkOw0KKw0K
IHZvaWQgZnJlZV9pbml0bWVtKHZvaWQpDQogew0KIAl1bnNpZ25lZCBsb25n
IGFkZHI7DQogDQotCXByb21fZnJlZV9wcm9tX21lbW9yeSAoKTsNCisJaWYg
KHByb21fbWVtb3J5X2ZyZWVkID09IDApIHsNCisJCXByb21fZnJlZV9wcm9t
X21lbW9yeSAoKTsNCisJCXByb21fbWVtb3J5X2ZyZWVkID0gMTsNCisJfQ0K
ICAgICANCiAJYWRkciA9ICh1bnNpZ25lZCBsb25nKSAmX19pbml0X2JlZ2lu
Ow0KIAl3aGlsZSAoYWRkciA8ICh1bnNpZ25lZCBsb25nKSAmX19pbml0X2Vu
ZCkgew0KLS0tIC4vYXJjaC9taXBzL3NnaS1pcDIyL2lwMjItbWMuYy5vcmln
CTIwMDItMDUtMTMgMjE6NTk6MzcuMDAwMDAwMDAwICswMjAwDQorKysgLi9h
cmNoL21pcHMvc2dpLWlwMjIvaXAyMi1tYy5jCTIwMDItMDUtMTMgMjI6NTc6
MzAuMDAwMDAwMDAwICswMjAwDQpAQCAtMTYyLDMgKzE2Miw4IEBADQogCX0N
CiAJbWNtaXNjX3JlZ3MtPmdpb3Bhcm0gPSB0bXByZWc7IC8qIHBvb2YgKi8N
CiB9DQorDQordm9pZA0KK3NnaW1jX2V4cDA2NCgpIHsNCisJbWNtaXNjX3Jl
Z3MtPmdpb3Bhcm0gfD0gU0dJTUNfR0lPUEFSTV9FWFAwNjQ7DQorfQ0KLS0t
IC4vYXJjaC9taXBzL3NnaS1pcDIyL2lwMjItc2V0dXAuYy5vcmlnCTIwMDIt
MDUtMTEgMTY6NTk6NDMuMDAwMDAwMDAwICswMjAwDQorKysgLi9hcmNoL21p
cHMvc2dpLWlwMjIvaXAyMi1zZXR1cC5jCTIwMDItMDUtMTMgMjM6MjY6Mzku
MDAwMDAwMDAwICswMjAwDQpAQCAtMTI0LDYgKzEyNCwyNiBAQA0KIHsNCiB9
DQogDQorc3RydWN0IHNnaV9wcm9tZ2Z4aW5mbyBzZ2lfcHJvbWdmeGluZm87
DQorc3RydWN0IHNnaV9wcm9tZ2Z4ICpzZ2lfcHJvbWdmeDsNCisNCitzdGF0
aWMgdm9pZCBzZ2lfZ2V0Z2Z4aW5mbyh2b2lkKQ0KK3sNCisJc3RydWN0IHNn
aV9wdmVjdG9yICpwdmVjdG9yID0gKFBST01CTE9DSyktPnB2ZWN0b3I7DQor
CXNnaV9wcm9tZ2Z4ID0gQVJDX0NBTEwwX1ZFQyhwdmVjdG9yLCBnZXRfcHJv
bWdmeCk7DQorCWlmIChzZ2lfcHJvbWdmeCAmJiBzZ2lfcHJvbWdmeC0+Z2Z4
YWRkcikgew0KKwkJLyogd2UgY29weSBzb21lIGZpZWxkcyBpbnRvIHNnaV9w
cm9tZ2Z4aW5mbyBzbyB0aGF0DQorCQkgKiB3ZSBoYXZlIHRoZSBpbmZvIGV2
ZW4gaWYgdGhlIHByb20gZGF0YSBpcyBmcmVlZC4NCisJCSAqLw0KKwkJc2dp
X3Byb21nZnhpbmZvLmFkZHIgPSBzZ2lfcHJvbWdmeC0+Z2Z4YWRkcjsNCisJ
CXNnaV9wcm9tZ2Z4aW5mby53aWR0aCA9IHNnaV9wcm9tZ2Z4LT53aWR0aDsN
CisJCXNnaV9wcm9tZ2Z4aW5mby5oZWlnaHQgPSBzZ2lfcHJvbWdmeC0+aGVp
Z2h0Ow0KKwl9DQorCS8qIGltcGFjdCBncmFwaGljcyBzZWVtcyB0byBuZWVk
IEVYUDA2NCAqLw0KKwlpZiAoc2dpX3Byb21nZnhpbmZvLmFkZHIgPT0gMHhi
ZjQwMDAwMCkNCisJCXNnaW1jX2V4cDA2NCgpOw0KK30NCisNCiB2b2lkIF9f
aW5pdCBpcDIyX3NldHVwKHZvaWQpDQogew0KICNpZmRlZiBDT05GSUdfU0VS
SUFMX0NPTlNPTEUNCkBAIC0xNDIsNiArMTYyLDcgQEANCiAJLyogSW5pdCBJ
TkRZIG1lbW9yeSBjb250cm9sbGVyLiAqLw0KIAlzZ2ltY19pbml0KCk7DQog
DQorCXNnaV9nZXRnZnhpbmZvKCk7DQogCS8qIE5vdyBlbmFibGUgYm9hcmRj
YWNoZXMsIGlmIGFueS4gKi8NCiAJaW5keV9zY19pbml0KCk7DQogDQpAQCAt
MTg2LDEwICsyMDcsMTEgQEANCiAgDQogCXNnaV92b2x1bWVfc2V0KHNpbXBs
ZV9zdHJ0b3VsKEFyY0dldEVudmlyb25tZW50VmFyaWFibGUoInZvbHVtZSIp
LCBOVUxMLCAxMCkpOw0KIA0KKwlzZ2lfZ2V0Z2Z4aW5mbygpOw0KICNpZmRl
ZiBDT05GSUdfVlQNCisJY29uc3dpdGNocCA9IDA7DQogI2lmZGVmIENPTkZJ
R19TR0lfTkVXUE9SVF9DT05TT0xFDQotCWlmKCBtaXBzX21hY2h0eXBlID09
IE1BQ0hfU0dJX0lORFkgKSB7DQotCQljb25zd2l0Y2hwID0gJm5ld3BvcnRf
Y29uOw0KKwlpZiAoc2dpX3Byb21nZnhpbmZvLmFkZHIgPT0gMHhiZjBmMDAw
MCB8fCBzZ2lfcHJvbWdmeGluZm8uYWRkciA9PSAweGJmNGYwMDAwKSB7DQog
DQogCQlzY3JlZW5faW5mbyA9IChzdHJ1Y3Qgc2NyZWVuX2luZm8pIHsNCiAJ
CQkwLCAwLAkJLyogb3JpZy14LCBvcmlnLXkgKi8NCkBAIC0yMDIsMTIgKzIy
NCwyOCBAQA0KIAkJCTAsCQkvKiBvcmlnX3ZpZGVvX2lzVkdBICovDQogCQkJ
MTYJCS8qIG9yaWdfdmlkZW9fcG9pbnRzICovDQogCQl9Ow0KLQl9IGVsc2Ug
ew0KLQkJY29uc3dpdGNocCA9ICZkdW1teV9jb247DQorCQljb25zd2l0Y2hw
ID0gJm5ld3BvcnRfY29uOw0KKwl9DQorI2VuZGlmDQorI2lmZGVmIENPTkZJ
R19TR0lfQVJDU19DT05TT0xFDQorCWlmICghY29uc3dpdGNocCAmJiBzZ2lf
cHJvbWdmeGluZm8uYWRkcikgew0KKwkJZXh0ZXJuIGNvbnN0IHN0cnVjdCBj
b25zdyBzZ2lhcmNzX2NvbjsNCisJCXNjcmVlbl9pbmZvID0gKHN0cnVjdCBz
Y3JlZW5faW5mbykgew0KKwkJCTAsIDAsCQkvKiBvcmlnLXgsIG9yaWcteSAq
Lw0KKwkJCTAsCQkvKiB1bnVzZWQgKi8NCisJCQkwLAkJLyogb3JpZ192aWRl
b19wYWdlICovDQorCQkJMCwJCS8qIG9yaWdfdmlkZW9fbW9kZSAqLw0KKwkJ
CTE2MCwJCS8qIG9yaWdfdmlkZW9fY29scyAqLw0KKwkJCTAsIDAsIDAsCS8q
IHVudXNlZCwgZWdhX2J4LCB1bnVzZWQgKi8NCisJCQk2NCwJCS8qIG9yaWdf
dmlkZW9fbGluZXMgKi8NCisJCQkwLAkJLyogb3JpZ192aWRlb19pc1ZHQSAq
Lw0KKwkJCTE2CQkvKiBvcmlnX3ZpZGVvX3BvaW50cyAqLw0KKwkJfTsNCisJ
CWNvbnN3aXRjaHAgPSAmc2dpYXJjc19jb247DQogCX0NCi0jZWxzZQ0KLQlj
b25zd2l0Y2hwID0gJmR1bW15X2NvbjsNCiAjZW5kaWYNCisJaWYgKGNvbnN3
aXRjaHAgPT0gMCkNCisJCWNvbnN3aXRjaHAgPT0gJmR1bW15X2NvbjsNCiAj
ZW5kaWYNCiANCiAJcnRjX29wcyA9ICZpbmR5X3J0Y19vcHM7DQotLS0gLi9k
cml2ZXJzL3ZpZGVvL01ha2VmaWxlLm9yaWcJMjAwMi0wNS0xMSAxODo1Nzox
My4wMDAwMDAwMDAgKzAyMDANCisrKyAuL2RyaXZlcnMvdmlkZW8vTWFrZWZp
bGUJMjAwMi0wNS0xMSAxODo1Nzo0NC4wMDAwMDAwMDAgKzAyMDANCkBAIC0y
MSw2ICsyMSw3IEBADQogDQogb2JqLSQoQ09ORklHX0RVTU1ZX0NPTlNPTEUp
ICAgICAgICs9IGR1bW15Y29uLm8NCiBvYmotJChDT05GSUdfU0dJX05FV1BP
UlRfQ09OU09MRSkgKz0gbmV3cG9ydF9jb24ubw0KK29iai0kKENPTkZJR19T
R0lfQVJDU19DT05TT0xFKSAgICArPSBzZ2lhcmNzX2Nvbi5vDQogb2JqLSQo
Q09ORklHX1BST01fQ09OU09MRSkgICAgICAgICs9IHByb21jb24ubyBwcm9t
Y29uX3RibC5vDQogb2JqLSQoQ09ORklHX1NUSV9DT05TT0xFKSAgICAgICAg
ICs9IHN0aWNvbi5vIHN0aWNvbi1ibW9kZS5vIHN0aWNvcmUubw0KIG9iai0k
KENPTkZJR19WR0FfQ09OU09MRSkgICAgICAgICArPSB2Z2Fjb24ubw0KLS0t
IC4vZHJpdmVycy92aWRlby9zZ2lhcmNzX2Nvbi5jLm9yaWcJMjAwMi0wNS0x
MSAxNzoxOTo1MS4wMDAwMDAwMDAgKzAyMDANCisrKyAuL2RyaXZlcnMvdmlk
ZW8vc2dpYXJjc19jb24uYwkyMDAyLTA1LTEzIDIzOjI4OjUyLjAwMDAwMDAw
MCArMDIwMA0KQEAgLTAsMCArMSw2MjcgQEANCisvKg0KKyAqIHNnaWFyY3Nf
Y29uLmM6IGdlbmVyaWMgY29uc29sZSBmb3IgU0dJIEFSQ1Mgc3lzdGVtcw0K
KyAqIA0KKyAqIChDKSAyMDAyIE1pY2hhZWwgU2Nocm9lZGVyIChtbHNAc3Vz
ZS5kZSkNCisgKiANCisgKiBBZHZhbnRhZ2VzOg0KKyAqICAtIHNob3VsZCB3
b3JrIG9uIGV2ZXJ5IFNHSSB3aXRoIEFSQ1MgcHJvbQ0KKyAqIERpc2FkdmFu
dGFnZXM6DQorICogIC0gaXMgc2xvdw0KKyAqICAtIG5lZWRzIHByb20gbWVt
b3J5IGJsb2NrDQorICoNCisgKiBTb21lIGNvZGUgc3RvbGVuIGZyb20gZmJj
b24uYyBhbmQgbmV3cG9ydF9jb24uYw0KKyAqLw0KKw0KKyNpbmNsdWRlIDxs
aW51eC9pbml0Lmg+DQorI2luY2x1ZGUgPGxpbnV4L2tlcm5lbC5oPg0KKyNp
bmNsdWRlIDxsaW51eC9lcnJuby5oPg0KKyNpbmNsdWRlIDxsaW51eC90dHku
aD4NCisjaW5jbHVkZSA8bGludXgva2QuaD4NCisjaW5jbHVkZSA8bGludXgv
c2VsZWN0aW9uLmg+DQorI2luY2x1ZGUgPGxpbnV4L2NvbnNvbGUuaD4NCisj
aW5jbHVkZSA8bGludXgvY29uc29sZV9zdHJ1Y3QuaD4NCisjaW5jbHVkZSA8
bGludXgvdnRfa2Vybi5oPg0KKyNpbmNsdWRlIDxsaW51eC9tbS5oPg0KKyNp
bmNsdWRlIDxsaW51eC9tb2R1bGUuaD4NCisjaW5jbHVkZSA8bGludXgvc2xh
Yi5oPg0KKyNpbmNsdWRlIDxhc20vc2dpYXJjcy5oPg0KKyNpbmNsdWRlIDxh
c20vYmNhY2hlLmg+DQorDQorI2lmbmRlZiBDT05GSUdfU0dJX05FV1BPUlRf
Q09OU09MRQ0KKyMgZGVmaW5lIElOQ0xVREVfTElOVVhfTE9HT19EQVRBDQor
I2VuZGlmDQorI2luY2x1ZGUgPGFzbS9saW51eF9sb2dvLmg+DQorDQorI2lu
Y2x1ZGUgPHZpZGVvL2ZvbnQuaD4NCisNCisjZGVmaW5lIExPR09fVwkJODAN
CisjZGVmaW5lIExPR09fSAkJODANCisNCitleHRlcm4gc3RydWN0IGZiY29u
X2ZvbnRfZGVzYyBmb250X3ZnYV84eDE2Ow0KKw0KKyNkZWZpbmUgRk9OVF9E
QVRBICgodW5zaWduZWQgY2hhciAqKWZvbnRfdmdhXzh4MTYuZGF0YSkNCisN
CisvKiBib3Jyb3dlZCBmcm9tIGZiY29uLmMgKi8NCisjZGVmaW5lIFJFRkNP
VU5UKGZkKQkoKChpbnQgKikoZmQpKVstMV0pDQorI2RlZmluZSBGTlRTSVpF
KGZkKQkoKChpbnQgKikoZmQpKVstMl0pDQorI2RlZmluZSBGTlRDSEFSQ05U
KGZkKQkoKChpbnQgKikoZmQpKVstM10pDQorI2RlZmluZSBGT05UX0VYVFJB
X1dPUkRTIDMNCisNCitzdGF0aWMgdW5zaWduZWQgY2hhciAqZm9udF9kYXRh
W01BWF9OUl9DT05TT0xFU107DQorDQorc3RhdGljIGludCBsb2dvX2FjdGl2
ZTsNCisNCitleHRlcm4gc3RydWN0IHNnaV9wcm9tZ2Z4ICpzZ2lfcHJvbWdm
eDsNCitleHRlcm4gaW50IHByb21fbWVtb3J5X2ZyZWVkOw0KKw0KK2V4dGVy
biB2b2lkIHNnaV9ocGM2NF9yZXN0b3JlKHZvaWQpLCBzZ2lfaHBjNjRfb2Zm
KHZvaWQpOw0KKw0KKyNkZWZpbmUgU0dJR0ZYVkVDVE9SICgoc3RydWN0IHNn
aV9nZnh2ZWN0b3IgKilzZ2lfcHJvbWdmeC0+Z2Z4dmVjdG9yKQ0KKyNkZWZp
bmUgU0dJQVJDU19DQUxMMChmdW5jKQkJQVJDX0NBTEwxX1ZFQyhTR0lHRlhW
RUNUT1IsIGZ1bmMsIHNnaV9wcm9tZ2Z4LT5nZnhhZGRyKQ0KKyNkZWZpbmUg
U0dJQVJDU19DQUxMMShmdW5jLGExKQkJQVJDX0NBTEwyX1ZFQyhTR0lHRlhW
RUNUT1IsIGZ1bmMsIHNnaV9wcm9tZ2Z4LT5nZnhhZGRyLCBhMSkNCisjZGVm
aW5lIFNHSUFSQ1NfQ0FMTDIoZnVuYyxhMSxhMikJQVJDX0NBTEwzX1ZFQyhT
R0lHRlhWRUNUT1IsIGZ1bmMsIHNnaV9wcm9tZ2Z4LT5nZnhhZGRyLCBhMSwg
YTIpDQorI2RlZmluZSBTR0lBUkNTX0NBTEwzKGZ1bmMsYTEsYTIsYTMpCUFS
Q19DQUxMNF9WRUMoU0dJR0ZYVkVDVE9SLCBmdW5jLCBzZ2lfcHJvbWdmeC0+
Z2Z4YWRkciwgYTEsIGEyLCBhMykNCisjZGVmaW5lIFNHSUFSQ1NfQ0FMTDQo
ZnVuYyxhMSxhMixhMyxhNCkJQVJDX0NBTEw1X1ZFQyhTR0lHRlhWRUNUT1Is
IGZ1bmMsIHNnaV9wcm9tZ2Z4LT5nZnhhZGRyLCBhMSwgYTIsIGEzLCBhNCkN
CisNCisjZGVmaW5lIFNHSUFSQ1NfU1RBUlQoZmxhZ3MpCQlkbyB7c2F2ZV9h
bmRfY2xpKGZsYWdzKTtiY19kaXNhYmxlKCk7fSB3aGlsZSAoMCkNCisjZGVm
aW5lIFNHSUFSQ1NfRU5EKGZsYWdzKQkJZG8ge2JjX2VuYWJsZSgpO3Jlc3Rv
cmVfZmxhZ3MoZmxhZ3MpO30gd2hpbGUgKDApDQorDQorI2RlZmluZSBDVVJT
T1JfRFJBV19ERUxBWSAgICAgICAgICAgICAgICgxKQ0KKyNkZWZpbmUgREVG
QVVMVF9DVVJTT1JfQkxJTktfUkFURSAgICAgICAoMjApDQorDQorc3RhdGlj
IGludCBjdXJzb3JfZHJhd247DQorc3RhdGljIGludCB2YmxfY3Vyc29yX2Nu
dDsNCitzdGF0aWMgaW50IGN1cnNvcl9vbjsNCitzdGF0aWMgaW50IGN1cnNv
cl9ibGlua19yYXRlOw0KK3N0YXRpYyBpbnQgY3Vyc29yX3g7DQorc3RhdGlj
IGludCBjdXJzb3JfeTsNCisNCitzdGF0aWMgaW5saW5lIHZvaWQgY3Vyc29y
X3VuZHJhd24odm9pZCkNCit7DQorICAgIHZibF9jdXJzb3JfY250ID0gMDsN
CisgICAgY3Vyc29yX2RyYXduID0gMDsNCit9DQorDQorc3RhdGljIHZvaWQg
Y3Vyc29yX3RpbWVyX2hhbmRsZXIodW5zaWduZWQgbG9uZyBkZXZfYWRkcik7
DQorc3RhdGljIHZvaWQgZmJjb25fdmJsX2hhbmRsZXIoaW50IGlycSwgdm9p
ZCAqZHVtbXksIHN0cnVjdCBwdF9yZWdzICpmcCk7DQorDQorc3RhdGljIHN0
cnVjdCB0aW1lcl9saXN0IGN1cnNvcl90aW1lciA9IHsNCisgICAgZnVuY3Rp
b246IGN1cnNvcl90aW1lcl9oYW5kbGVyDQorfTsNCisNCitzdGF0aWMgdm9p
ZCBjdXJzb3JfdGltZXJfaGFuZGxlcih1bnNpZ25lZCBsb25nIGRldl9hZGRy
KQ0KK3sNCisgICAgICBmYmNvbl92YmxfaGFuZGxlcigwLCBOVUxMLCBOVUxM
KTsNCisgICAgICBjdXJzb3JfdGltZXIuZXhwaXJlcyA9IGppZmZpZXMrSFov
NTA7DQorICAgICAgYWRkX3RpbWVyKCZjdXJzb3JfdGltZXIpOw0KK30NCisN
CitzdGF0aWMgaW5saW5lIHZvaWQgc2dpYXJjc19pbml0X2NtYXAodm9pZCkN
Cit7DQorCXVuc2lnbmVkIHNob3J0IGk7DQorCXVuc2lnbmVkIGxvbmcgZmxh
Z3M7DQorDQorCVNHSUFSQ1NfU1RBUlQoZmxhZ3MpOw0KKwlmb3IgKGkgPSAw
OyBpIDwgMTY7IGkrKykgew0KKwkJU0dJQVJDU19DQUxMNChTZXRDbWFwLCBj
b2xvcl90YWJsZVtpXSwgZGVmYXVsdF9yZWRbaV0sIGRlZmF1bHRfZ3JuW2ld
LCBkZWZhdWx0X2JsdVtpXSk7DQorCX0NCisJU0dJQVJDU19FTkQoZmxhZ3Mp
Ow0KK30NCisNCitzdGF0aWMgaW5saW5lIHZvaWQgc2dpYXJjc19zaG93X2xv
Z28odm9pZCkNCit7DQorCXVuc2lnbmVkIGxvbmcgaSwgeCwgeTsNCisJdW5z
aWduZWQgbG9uZyBmbGFnczsNCisNCisJU0dJQVJDU19TVEFSVChmbGFncyk7
DQorCWZvciAoaSA9IDA7IGkgPCBMSU5VWF9MT0dPX0NPTE9SUzsgaSsrKQ0K
KwkJIFNHSUFSQ1NfQ0FMTDQoU2V0Q21hcCwgaSArIDB4MjAsIGxpbnV4X2xv
Z29fcmVkW2ldLCBsaW51eF9sb2dvX2dyZWVuW2ldLCBsaW51eF9sb2dvX2Js
dWVbaV0pOw0KKwlmb3IgKHkgPSAwOyB5IDwgTE9HT19IOyB5KyspDQorCQlm
b3IgKHggPSAwOyB4IDwgTE9HT19XOyB4KyspIHsNCisJCQlTR0lBUkNTX0NB
TEwxKFNldENvbG9yLCBsaW51eF9sb2dvW3kgKiBMT0dPX1cgKyB4XSk7DQor
CQkJU0dJQVJDU19DQUxMMihEcmF3UGl4ZWwsIHNnaV9wcm9tZ2Z4LT53aWR0
aCAtIExPR09fVyArIHgsIHNnaV9wcm9tZ2Z4LT5oZWlnaHQgLSAxIC0geSk7
DQorCQl9DQorCVNHSUFSQ1NfRU5EKGZsYWdzKTsNCit9DQorDQorc3RhdGlj
IGlubGluZSB2b2lkIHNnaWFyY3NfY2xlYXJfc2NyZWVuKGludCB4c3RhcnQs
IGludCB5c3RhcnQsIGludCB4ZW5kLA0KKwkJCQkJaW50IHllbmQsIGludCBj
aSkNCit7DQorCXVuc2lnbmVkIGxvbmcgZmxhZ3M7DQorCWlmIChsb2dvX2Fj
dGl2ZSkNCisJCXJldHVybjsNCisJU0dJQVJDU19TVEFSVChmbGFncyk7DQor
CVNHSUFSQ1NfQ0FMTDEoU2V0Q29sb3IsIGNpKTsNCisJU0dJQVJDU19DQUxM
NChEcmF3QmxvY2ssIHhzdGFydCwgc2dpX3Byb21nZngtPmhlaWdodCAtIDEg
LSB5c3RhcnQsIHhlbmQsIHNnaV9wcm9tZ2Z4LT5oZWlnaHQgLSAxIC0geWVu
ZCk7DQorCVNHSUFSQ1NfRU5EKGZsYWdzKTsNCit9DQorDQorI2lmZGVmIE1P
RFVMRQ0KK3N0YXRpYyBjb25zdCBjaGFyICpzZ2lhcmNzX3N0YXJ0dXAodm9p
ZCkNCisjZWxzZQ0KK3N0YXRpYyBjb25zdCBjaGFyICpfX2luaXQgc2dpYXJj
c19zdGFydHVwKHZvaWQpDQorI2VuZGlmDQorew0KKwlpbnQgaTsNCisJdW5z
aWduZWQgbG9uZyBmbGFnczsNCisNCisJaWYgKHNnaV9wcm9tZ2Z4ID09IDAg
fHwgcHJvbV9tZW1vcnlfZnJlZWQgPiAwKQ0KKwkJcmV0dXJuIE5VTEw7DQor
CXByb21fbWVtb3J5X2ZyZWVkID0gLTE7DQorCWZvciAoaSA9IDA7IGkgPCBN
QVhfTlJfQ09OU09MRVM7IGkrKykNCisJCWZvbnRfZGF0YVtpXSA9IEZPTlRf
REFUQTsNCisJc2dpYXJjc19pbml0X2NtYXAoKTsNCisJc2dpYXJjc19jbGVh
cl9zY3JlZW4oMCwgMCwgc2dpX3Byb21nZngtPndpZHRoIC0gMSwgc2dpX3By
b21nZngtPmhlaWdodCAtIDEsIDApOw0KKwlTR0lBUkNTX1NUQVJUKGZsYWdz
KTsNCisJLyogbW92ZSBtb3VzZSBvZmZzY3JlZW4gKi8NCisJU0dJQVJDU19D
QUxMMihTZXRDdXJzb3IsIHNnaV9wcm9tZ2Z4LT53aWR0aCArIDEwLCBzZ2lf
cHJvbWdmeC0+aGVpZ2h0ICsgMTApOw0KKwlTR0lBUkNTX0VORChmbGFncyk7
DQorCQ0KKwljdXJzb3JfYmxpbmtfcmF0ZSA9IERFRkFVTFRfQ1VSU09SX0JM
SU5LX1JBVEU7DQorCWN1cnNvcl90aW1lci5leHBpcmVzID0gamlmZmllcytI
Wi81MDsNCisJYWRkX3RpbWVyKCZjdXJzb3JfdGltZXIpOw0KKw0KKwlwcmlu
dGsoIlNHSUFSQ1MgY29sb2xlIGRyaXZlciwgJWR4JWQgYXQgMHgleFxuIiwg
c2dpX3Byb21nZngtPndpZHRoLCBzZ2lfcHJvbWdmeC0+aGVpZ2h0LCBzZ2lf
cHJvbWdmeC0+Z2Z4YWRkcik7DQorCXJldHVybiAiU0dJX0FSQ1MiOw0KK30N
CisNCitzdGF0aWMgdm9pZCBzZ2lhcmNzX2luaXQoc3RydWN0IHZjX2RhdGEg
KnZjLCBpbnQgaW5pdCkNCit7DQorCXZjLT52Y19jb2xzID0gc2dpX3Byb21n
ZngtPndpZHRoIC8gODsNCisJdmMtPnZjX3Jvd3MgPSBzZ2lfcHJvbWdmeC0+
aGVpZ2h0IC8gMTY7DQorCXZjLT52Y19jYW5fZG9fY29sb3IgPSAxOw0KK30N
CisNCitzdGF0aWMgdm9pZCBzZ2lhcmNzX2NsZWFyKHN0cnVjdCB2Y19kYXRh
ICp2YywgaW50IHN5LCBpbnQgc3gsIGludCBoZWlnaHQsDQorCQkJICBpbnQg
d2lkdGgpDQorew0KKwlpbnQgcmVkcmF3X2N1cnNvciA9IDA7DQorCWlmIChs
b2dvX2FjdGl2ZSkNCisJCXJldHVybjsNCisJaWYgKChzeSA8PSBjdXJzb3Jf
eSkgJiYgKGN1cnNvcl95IDwgc3kraGVpZ2h0KSAmJg0KKwkgICAgKHN4IDw9
IGN1cnNvcl94KSAmJiAoY3Vyc29yX3ggPCBzeCt3aWR0aCkpIHsNCisJCWN1
cnNvcl91bmRyYXduKCk7DQorCQlyZWRyYXdfY3Vyc29yID0gMTsNCisJfQ0K
KwlzZ2lhcmNzX2NsZWFyX3NjcmVlbihzeCA8PCAzLCBzeSA8PCA0LCAoKHN4
ICsgd2lkdGgpIDw8IDMpIC0gMSwgKChzeSArIGhlaWdodCkgPDwgNCkgLSAx
LCAodmMtPnZjX2NvbG9yICYgMHhmMCkgPj4gNCk7DQorCWlmIChyZWRyYXdf
Y3Vyc29yKQ0KKwkJdmJsX2N1cnNvcl9jbnQgPSBDVVJTT1JfRFJBV19ERUxB
WTsNCit9DQorDQorc3RhdGljIHZvaWQgc2dpYXJjc19wdXRjX3JhdyhzdHJ1
Y3QgdmNfZGF0YSAqdmMsIGludCBjaGFyYXR0ciwgaW50IHlwb3MsDQorCQkJ
IGludCB4cG9zKQ0KK3sNCisJc3RydWN0IHNnaV9nZnhiaXRtYXAgYm07DQor
CXVuc2lnbmVkIGNoYXIgKnA7DQorCVVTSE9SVCBtWzE2XTsNCisJaW50IGk7
DQorCXVuc2lnbmVkIGxvbmcgZmxhZ3M7DQorDQorCXAgPSAmZm9udF9kYXRh
W3ZjLT52Y19udW1dWyhjaGFyYXR0ciAmIDB4ZmYpIDw8IDRdOw0KKwljaGFy
YXR0ciA9IChjaGFyYXR0ciA+PiA4KSAmIDB4ZmY7DQorCXhwb3MgPDw9IDM7
DQorCXlwb3MgPDw9IDQ7DQorDQorCWlmICghbG9nb19hY3RpdmUpDQorCQlz
Z2lhcmNzX2NsZWFyX3NjcmVlbih4cG9zLCB5cG9zLCB4cG9zICsgNywgeXBv
cyArIDE1LCAoY2hhcmF0dHIgJiAweGYwKSA+PiA0KTsNCisJZm9yIChpID0g
MDsgaSA8IDE2OyBpKyspDQorCQltWzE1IC0gaV0gPSBwW2ldIDw8IDg7DQor
CWJtLmJpdG1hcCA9IG07DQorCWJtLndpZHRoID0gODsNCisJYm0uaGVpZ2h0
ID0gMTY7DQorCWJtLm9mZnggPSBibS5vZmZ5ID0gYm0ubW92ZXggPSBibS5t
b3ZleSA9IDA7DQorCWJtLnNob3J0c3BlcmxpbmUgPSAxOw0KKwlTR0lBUkNT
X1NUQVJUKGZsYWdzKTsNCisJU0dJQVJDU19DQUxMMShTZXRDb2xvciwgY2hh
cmF0dHIgJiAweDBmKTsNCisJU0dJQVJDU19DQUxMMihTZXRQb3MsIHhwb3Ms
IHNnaV9wcm9tZ2Z4LT5oZWlnaHQgLSAxNiAtIHlwb3MpOw0KKwlTR0lBUkNT
X0NBTEwxKERyYXdCaXRtYXAsICZibSk7DQorCVNHSUFSQ1NfRU5EKGZsYWdz
KTsNCit9DQorDQorc3RhdGljIHZvaWQgc2dpYXJjc19wdXRjKHN0cnVjdCB2
Y19kYXRhICp2YywgaW50IGNoYXJhdHRyLCBpbnQgeXBvcywNCisJCQkgaW50
IHhwb3MpDQorew0KKwlpbnQgcmVkcmF3X2N1cnNvciA9IDA7DQorCWlmICgo
Y3Vyc29yX3ggPT0geHBvcykgJiYgKGN1cnNvcl95ID09IHlwb3MpKSB7DQor
CQljdXJzb3JfdW5kcmF3bigpOw0KKwkJcmVkcmF3X2N1cnNvciA9IDE7DQor
CX0NCisJc2dpYXJjc19wdXRjX3Jhdyh2YywgY2hhcmF0dHIsIHlwb3MsIHhw
b3MpOw0KKwlpZiAocmVkcmF3X2N1cnNvcikNCisJCXZibF9jdXJzb3JfY250
ID0gQ1VSU09SX0RSQVdfREVMQVk7DQorfQ0KKw0KK3N0YXRpYyB2b2lkIHNn
aWFyY3NfcHV0Y3Moc3RydWN0IHZjX2RhdGEgKnZjLCBjb25zdCB1bnNpZ25l
ZCBzaG9ydCAqcywNCisJCQkgIGludCBjb3VudCwgaW50IHlwb3MsIGludCB4
cG9zKQ0KK3sNCisJaW50IHJlZHJhd19jdXJzb3IgPSAwOw0KKwlpbnQgY2hh
cmF0dHI7DQorCXN0cnVjdCBzZ2lfZ2Z4Yml0bWFwIGJtOw0KKwl1bnNpZ25l
ZCBjaGFyICpwOw0KKwlpbnQgbGluZSwgYml0ZSwgaSwgajsNCisJVVNIT1JU
IG1bMTYgKiAxNl07CS8qIDMyIGNoYXJzICovDQorCXVuc2lnbmVkIGxvbmcg
ZmxhZ3M7DQorDQorCWlmICgoY3Vyc29yX3kgPT0geXBvcykgJiYgKHhwb3Mg
PD0gY3Vyc29yX3gpICYmDQorCSAgICAoY3Vyc29yX3ggPCAoeHBvcyArIGNv
dW50KSkpIHsNCisJCWN1cnNvcl91bmRyYXduKCk7DQorCQlyZWRyYXdfY3Vy
c29yID0gMTsNCisJfQ0KKw0KKwl4cG9zIDw8PSAzOw0KKwl5cG9zIDw8PSA0
Ow0KKwljaGFyYXR0ciA9IChzY3JfcmVhZHcocykgPj4gOCkgJiAweGZmOw0K
KwlpZiAoIWxvZ29fYWN0aXZlKQ0KKwkJc2dpYXJjc19jbGVhcl9zY3JlZW4o
eHBvcywgeXBvcywgeHBvcyArIGNvdW50ICogOCAtIDEsIHlwb3MgKyAxNSwg
KGNoYXJhdHRyICYgMHhmMCkgPj4gNCk7DQorCXdoaWxlIChjb3VudCA+IDAp
IHsNCisJCWJpdGUgPSBjb3VudCA+IDMyID8gMzIgOiBjb3VudDsNCisJCWxp
bmUgPSAoYml0ZSArIDEpICYgfjE7DQorCQlmb3IgKGkgPSAwOyBpIDwgYml0
ZTsgaSsrKSB7DQorCQkJcCA9ICZmb250X2RhdGFbdmMtPnZjX251bV1bKHNj
cl9yZWFkdyhzKyspICYgMHhmZikgPDwgNF07DQorCQkJZm9yIChqID0gMTUg
KiBsaW5lOyBqID49IDA7IGogLT0gbGluZSkNCisJCQkJKigodW5zaWduZWQg
Y2hhciAqKW0gKyBqICsgaSkgPSAqcCsrOw0KKwkJfQ0KKwkJYm0uYml0bWFw
ID0gbTsNCisJCWJtLndpZHRoID0gYml0ZSAqIDg7DQorCQlibS5oZWlnaHQg
PSAxNjsNCisJCWJtLm9mZnggPSBibS5vZmZ5ID0gYm0ubW92ZXggPSBibS5t
b3ZleSA9IDA7DQorCQlibS5zaG9ydHNwZXJsaW5lID0gbGluZSAvIDI7DQor
CQlTR0lBUkNTX1NUQVJUKGZsYWdzKTsNCisJCVNHSUFSQ1NfQ0FMTDEoU2V0
Q29sb3IsIGNoYXJhdHRyICYgMHgwZik7DQorCQlTR0lBUkNTX0NBTEwyKFNl
dFBvcywgeHBvcywgc2dpX3Byb21nZngtPmhlaWdodCAtIDE2IC0geXBvcyk7
DQorCQlTR0lBUkNTX0NBTEwxKERyYXdCaXRtYXAsICZibSk7DQorCQlTR0lB
UkNTX0VORChmbGFncyk7DQorCQl4cG9zICs9IGJpdGUgKiA4Ow0KKwkJY291
bnQgLT0gYml0ZTsNCisJfQ0KKwlpZiAocmVkcmF3X2N1cnNvcikNCisJICAg
IHZibF9jdXJzb3JfY250ID0gQ1VSU09SX0RSQVdfREVMQVk7DQorfQ0KKw0K
K3N0YXRpYyB2b2lkIHNnaWFyY3NfY3Vyc29yX3JldmMoc3RydWN0IHZjX2Rh
dGEgKnZjLCBpbnQgeCwgaW50IHkpDQorew0KKwl1bnNpZ25lZCBzaG9ydCBj
ID0gKih1bnNpZ25lZCBzaG9ydCAqKSh2Yy0+dmNfb3JpZ2luICsgdmMtPnZj
X3NpemVfcm93ICogeSArIHggKiAyKTsNCisJaWYgKCFjdXJzb3JfZHJhd24p
DQorCQljIF49IDB4ZmYwMDsNCisJc2dpYXJjc19wdXRjX3Jhdyh2YywgYywg
eSwgeCk7DQorfQ0KKw0KK3N0YXRpYyB2b2lkIHNnaWFyY3NfY3Vyc29yKHN0
cnVjdCB2Y19kYXRhICp2YywgaW50IG1vZGUpDQorew0KKwlpZiAoY3Vyc29y
X3ggPT0gdmMtPnZjX3ggJiYgY3Vyc29yX3kgPT0gdmMtPnZjX3kgJiYNCisJ
ICAgIChtb2RlID09IENNX0VSQVNFKSA9PSAhY3Vyc29yX29uKQ0KKwkJcmV0
dXJuOw0KKwljdXJzb3Jfb24gPSAwOw0KKwlpZiAoY3Vyc29yX2RyYXduKQ0K
KwkgICAgc2dpYXJjc19jdXJzb3JfcmV2Yyh2YywgY3Vyc29yX3gsIGN1cnNv
cl95KTsNCisJY3Vyc29yX3ggPSB2Yy0+dmNfeDsNCisJY3Vyc29yX3kgPSB2
Yy0+dmNfeTsNCisJc3dpdGNoIChtb2RlKSB7DQorCWNhc2UgQ01fRVJBU0U6
DQorCQljdXJzb3JfZHJhd24gPSAwOw0KKwkJYnJlYWs7DQorCWNhc2UgQ01f
TU9WRToNCisJY2FzZSBDTV9EUkFXOg0KKwkJaWYgKGN1cnNvcl9kcmF3bikN
CisJCSAgICBzZ2lhcmNzX2N1cnNvcl9yZXZjKHZjLCBjdXJzb3JfeCwgY3Vy
c29yX3kpOw0KKwkJdmJsX2N1cnNvcl9jbnQgPSBDVVJTT1JfRFJBV19ERUxB
WTsNCisJCWN1cnNvcl9vbiA9IDE7DQorCQlicmVhazsNCisJfQ0KK30NCisN
CitzdGF0aWMgdm9pZCBmYmNvbl92YmxfaGFuZGxlcihpbnQgaXJxLCB2b2lk
ICpkdW1teSwgc3RydWN0IHB0X3JlZ3MgKmZwKQ0KK3sNCisgICAgaWYgKCFj
dXJzb3Jfb24pDQorCXJldHVybjsNCisgICAgaWYgKHZibF9jdXJzb3JfY250
ICYmIC0tdmJsX2N1cnNvcl9jbnQgPT0gMCkgew0KKwlzZ2lhcmNzX2N1cnNv
cl9yZXZjKHZjX2NvbnNbZmdfY29uc29sZV0uZCwgY3Vyc29yX3gsIGN1cnNv
cl95KTsNCisJY3Vyc29yX2RyYXduIF49IDE7DQorCXZibF9jdXJzb3JfY250
ID0gY3Vyc29yX2JsaW5rX3JhdGU7DQorICAgIH0NCit9DQorDQorDQorc3Rh
dGljIGludCBzZ2lhcmNzX3N3aXRjaChzdHJ1Y3QgdmNfZGF0YSAqdmMpDQor
ew0KKwlzdGF0aWMgaW50IGxvZ29fZHJhd24gPSAwOw0KKw0KKwlpZiAoIWxv
Z29fZHJhd24pIHsNCisJCXNnaWFyY3Nfc2hvd19sb2dvKCk7DQorCQlsb2dv
X2RyYXduID0gMTsNCisJCWxvZ29fYWN0aXZlID0gMTsNCisJfQ0KKwlyZXR1
cm4gMTsNCit9DQorDQorc3RhdGljIGludCBzZ2lhcmNzX2JsYW5rKHN0cnVj
dCB2Y19kYXRhICpjLCBpbnQgYmxhbmspDQorew0KKwl1bnNpZ25lZCBsb25n
IGZsYWdzOw0KKw0KKwlTR0lBUkNTX1NUQVJUKGZsYWdzKTsNCisJU0dJQVJD
U19DQUxMMShCbGFua1NjcmVlbiwgYmxhbmspOw0KKwlTR0lBUkNTX0VORChm
bGFncyk7DQorCXJldHVybiAxOw0KK30NCisNCitzdGF0aWMgaW50IHNnaWFy
Y3Nfc2V0X2ZvbnQoaW50IHVuaXQsIHN0cnVjdCBjb25zb2xlX2ZvbnRfb3Ag
Km9wKQ0KK3sNCisJaW50IHcgPSBvcC0+d2lkdGg7DQorCWludCBoID0gb3At
PmhlaWdodDsNCisJaW50IHNpemUgPSBoICogb3AtPmNoYXJjb3VudDsNCisJ
aW50IGk7DQorCXVuc2lnbmVkIGNoYXIgKm5ld19kYXRhLCAqZGF0YSA9IG9w
LT5kYXRhLCAqcDsNCisNCisJLyogbGFkaXM6IHdoZW4gSSBncm93IHVwLCB0
aGVyZSB3aWxsIGJlIGEgZGF5Li4uIGFuZCBtb3JlIHNpemVzIHdpbGwNCisJ
ICogYmUgc3VwcG9ydGVkIDstKSAqLw0KKwlpZiAoKHcgIT0gOCkgfHwgKGgg
IT0gMTYpDQorCSAgICB8fCAob3AtPmNoYXJjb3VudCAhPSAyNTYgJiYgb3At
PmNoYXJjb3VudCAhPSA1MTIpKQ0KKwkJcmV0dXJuIC1FSU5WQUw7DQorDQor
CWlmICghKG5ld19kYXRhID0ga21hbGxvYyhGT05UX0VYVFJBX1dPUkRTICog
c2l6ZW9mKGludCkgKyBzaXplLA0KKwkgICAgIEdGUF9VU0VSKSkpIHJldHVy
biAtRU5PTUVNOw0KKw0KKwluZXdfZGF0YSArPSBGT05UX0VYVFJBX1dPUkRT
ICogc2l6ZW9mKGludCk7DQorCUZOVFNJWkUobmV3X2RhdGEpID0gc2l6ZTsN
CisJRk5UQ0hBUkNOVChuZXdfZGF0YSkgPSBvcC0+Y2hhcmNvdW50Ow0KKwlS
RUZDT1VOVChuZXdfZGF0YSkgPSAwOwkvKiB1c2FnZSBjb3VudGVyICovDQor
DQorCXAgPSBuZXdfZGF0YTsNCisJZm9yIChpID0gMDsgaSA8IG9wLT5jaGFy
Y291bnQ7IGkrKykgew0KKwkJbWVtY3B5KHAsIGRhdGEsIGgpOw0KKwkJZGF0
YSArPSAzMjsNCisJCXAgKz0gaDsNCisJfQ0KKw0KKwkvKiBjaGVjayBpZiBm
b250IGlzIGFscmVhZHkgdXNlZCBieSBvdGhlciBjb25zb2xlICovDQorCWZv
ciAoaSA9IDA7IGkgPCBNQVhfTlJfQ09OU09MRVM7IGkrKykgew0KKwkJaWYg
KGZvbnRfZGF0YVtpXSAhPSBGT05UX0RBVEENCisJCSAgICAmJiBGTlRTSVpF
KGZvbnRfZGF0YVtpXSkgPT0gc2l6ZQ0KKwkJICAgICYmICFtZW1jbXAoZm9u
dF9kYXRhW2ldLCBuZXdfZGF0YSwgc2l6ZSkpIHsNCisJCQlrZnJlZShuZXdf
ZGF0YSAtIEZPTlRfRVhUUkFfV09SRFMgKiBzaXplb2YoaW50KSk7DQorCQkJ
LyogY3VycmVudCBmb250IGlzIHRoZSBzYW1lIGFzIHRoZSBuZXcgb25lICov
DQorCQkJaWYgKGkgPT0gdW5pdCkNCisJCQkJcmV0dXJuIDA7DQorCQkJbmV3
X2RhdGEgPSBmb250X2RhdGFbaV07DQorCQkJYnJlYWs7DQorCQl9DQorCX0N
CisJLyogb2xkIGZvbnQgaXMgdXNlciBmb250ICovDQorCWlmIChmb250X2Rh
dGFbdW5pdF0gIT0gRk9OVF9EQVRBKSB7DQorCQlpZiAoLS1SRUZDT1VOVChm
b250X2RhdGFbdW5pdF0pID09IDApDQorCQkJa2ZyZWUoZm9udF9kYXRhW3Vu
aXRdIC0NCisJCQkgICAgICBGT05UX0VYVFJBX1dPUkRTICogc2l6ZW9mKGlu
dCkpOw0KKwl9DQorCVJFRkNPVU5UKG5ld19kYXRhKSsrOw0KKwlmb250X2Rh
dGFbdW5pdF0gPSBuZXdfZGF0YTsNCisNCisJcmV0dXJuIDA7DQorfQ0KKw0K
K3N0YXRpYyBpbnQgc2dpYXJjc19zZXRfZGVmX2ZvbnQoaW50IHVuaXQsIHN0
cnVjdCBjb25zb2xlX2ZvbnRfb3AgKm9wKQ0KK3sNCisJaWYgKGZvbnRfZGF0
YVt1bml0XSAhPSBGT05UX0RBVEEpIHsNCisJCWlmICgtLVJFRkNPVU5UKGZv
bnRfZGF0YVt1bml0XSkgPT0gMCkNCisJCQlrZnJlZShmb250X2RhdGFbdW5p
dF0gLQ0KKwkJCSAgICAgIEZPTlRfRVhUUkFfV09SRFMgKiBzaXplb2YoaW50
KSk7DQorCQlmb250X2RhdGFbdW5pdF0gPSBGT05UX0RBVEE7DQorCX0NCisN
CisJcmV0dXJuIDA7DQorfQ0KKw0KK3N0YXRpYyBpbnQgc2dpYXJjc19mb250
X29wKHN0cnVjdCB2Y19kYXRhICp2Yywgc3RydWN0IGNvbnNvbGVfZm9udF9v
cCAqb3ApDQorew0KKwlpbnQgdW5pdCA9IHZjLT52Y19udW07DQorDQorCXN3
aXRjaCAob3AtPm9wKSB7DQorCWNhc2UgS0RfRk9OVF9PUF9TRVQ6DQorCQly
ZXR1cm4gc2dpYXJjc19zZXRfZm9udCh1bml0LCBvcCk7DQorCWNhc2UgS0Rf
Rk9OVF9PUF9TRVRfREVGQVVMVDoNCisJCXJldHVybiBzZ2lhcmNzX3NldF9k
ZWZfZm9udCh1bml0LCBvcCk7DQorCWRlZmF1bHQ6DQorCQlyZXR1cm4gLUVO
T1NZUzsNCisJfQ0KK30NCisNCitzdGF0aWMgaW50IHNnaWFyY3Nfc2V0X3Bh
bGV0dGUoc3RydWN0IHZjX2RhdGEgKnZjLCB1bnNpZ25lZCBjaGFyICp0YWJs
ZSkNCit7DQorCXJldHVybiAtRUlOVkFMOw0KK30NCisNCitzdGF0aWMgaW50
IHNnaWFyY3Nfc2Nyb2xsZGVsdGEoc3RydWN0IHZjX2RhdGEgKnZjLCBpbnQg
bGluZXMpDQorew0KKwkvKiB0aGVyZSBpcyAobmVhcmx5KSBubyBvZmYtc2Ny
ZWVuIG1lbW9yeSwgc28gd2UgY2FuJ3Qgc2Nyb2xsIGJhY2sgKi8NCisJcmV0
dXJuIDA7DQorfQ0KKw0KK3N0YXRpYyBpbnQgc2dpYXJjc19zY3JvbGwoc3Ry
dWN0IHZjX2RhdGEgKnZjLCBpbnQgdCwgaW50IGIsIGludCBkaXIsDQorCQkJ
ICBpbnQgbGluZXMpDQorew0KKwlpbnQgY291bnQsIHgsIHk7DQorCXVuc2ln
bmVkIHNob3J0ICpzLCAqZDsNCisJdW5zaWduZWQgc2hvcnQgY2hhdHRyOw0K
Kw0KKwlzZ2lhcmNzX2N1cnNvcih2YywgQ01fRVJBU0UpOw0KKw0KKwlpZiAo
bG9nb19hY3RpdmUpCXsNCisJCWxvZ29fYWN0aXZlID0gMDsNCisJCXNnaWFy
Y3NfY2xlYXJfc2NyZWVuKHNnaV9wcm9tZ2Z4LT53aWR0aCAtIExPR09fVywg
MCwgc2dpX3Byb21nZngtPndpZHRoIC0gMSwgTE9HT19IIC0gMSwgMCk7DQor
CX0NCisJY291bnQgPSAoYiAtIHQgLSBsaW5lcykgKiB2Yy0+dmNfY29sczsN
CisJaWYgKGRpciA9PSBTTV9VUCkgew0KKwkJeCA9IDA7DQorCQl5ID0gdDsN
CisJCXMgPSAodW5zaWduZWQgc2hvcnQgKikgKHZjLT52Y19vcmlnaW4gKw0K
KwkJCQkJdmMtPnZjX3NpemVfcm93ICogKHQgKyBsaW5lcykpOw0KKwkJZCA9
ICh1bnNpZ25lZCBzaG9ydCAqKSAodmMtPnZjX29yaWdpbiArDQorCQkJCQl2
Yy0+dmNfc2l6ZV9yb3cgKiB0KTsNCisJCXdoaWxlIChjb3VudC0tKSB7DQor
CQkJY2hhdHRyID0gc2NyX3JlYWR3KHMrKyk7DQorCQkJaWYgKGNoYXR0ciAh
PSBzY3JfcmVhZHcoZCkpIHsNCisJCQkJc2dpYXJjc19wdXRjKHZjLCBjaGF0
dHIsIHksIHgpOw0KKwkJCQlzY3Jfd3JpdGV3KGNoYXR0ciwgZCk7DQorCQkJ
fQ0KKwkJCWQrKzsNCisJCQlpZiAoKyt4ID09IHZjLT52Y19jb2xzKSB7DQor
CQkJCXggPSAwOw0KKwkJCQl5Kys7DQorCQkJfQ0KKwkJfQ0KKwkJZCA9ICh1
bnNpZ25lZCBzaG9ydCAqKSAodmMtPnZjX29yaWdpbiArDQorCQkJCQl2Yy0+
dmNfc2l6ZV9yb3cgKiAoYiAtIGxpbmVzKSk7DQorCQl4ID0gMDsNCisJCXkg
PSBiIC0gbGluZXM7DQorCQlmb3IgKGNvdW50ID0gMDsgY291bnQgPCAobGlu
ZXMgKiB2Yy0+dmNfY29scyk7IGNvdW50KyspIHsNCisJCQlpZiAoc2NyX3Jl
YWR3KGQpICE9IHZjLT52Y192aWRlb19lcmFzZV9jaGFyKSB7DQorCQkJCXNn
aWFyY3NfcHV0Yyh2YywgdmMtPnZjX3ZpZGVvX2VyYXNlX2NoYXIsDQorCQkJ
CQkgICAgIHksIHgpOw0KKwkJCQlzY3Jfd3JpdGV3KHZjLT52Y192aWRlb19l
cmFzZV9jaGFyLCBkKTsNCisJCQl9DQorCQkJZCsrOw0KKwkJCWlmICgrK3gg
PT0gdmMtPnZjX2NvbHMpIHsNCisJCQkJeCA9IDA7DQorCQkJCXkrKzsNCisJ
CQl9DQorCQl9DQorCX0gZWxzZSB7DQorCQl4ID0gdmMtPnZjX2NvbHMgLSAx
Ow0KKwkJeSA9IGIgLSAxOw0KKwkJcyA9ICh1bnNpZ25lZCBzaG9ydCAqKSAo
dmMtPnZjX29yaWdpbiArDQorCQkJCQl2Yy0+dmNfc2l6ZV9yb3cgKiAoYiAt
IGxpbmVzKSAtIDIpOw0KKwkJZCA9ICh1bnNpZ25lZCBzaG9ydCAqKSAodmMt
PnZjX29yaWdpbiArDQorCQkJCQl2Yy0+dmNfc2l6ZV9yb3cgKiBiIC0gMik7
DQorCQl3aGlsZSAoY291bnQtLSkgew0KKwkJCWNoYXR0ciA9IHNjcl9yZWFk
dyhzLS0pOw0KKwkJCWlmIChjaGF0dHIgIT0gc2NyX3JlYWR3KGQpKSB7DQor
CQkJCXNnaWFyY3NfcHV0Yyh2YywgY2hhdHRyLCB5LCB4KTsNCisJCQkJc2Ny
X3dyaXRldyhjaGF0dHIsIGQpOw0KKwkJCX0NCisJCQlkLS07DQorCQkJaWYg
KHgtLSA9PSAwKSB7DQorCQkJCXggPSB2Yy0+dmNfY29scyAtIDE7DQorCQkJ
CXktLTsNCisJCQl9DQorCQl9DQorCQlkID0gKHVuc2lnbmVkIHNob3J0ICop
ICh2Yy0+dmNfb3JpZ2luICsNCisJCQkJCXZjLT52Y19zaXplX3JvdyAqIHQp
Ow0KKwkJeCA9IDA7DQorCQl5ID0gdDsNCisJCWZvciAoY291bnQgPSAwOyBj
b3VudCA8IChsaW5lcyAqIHZjLT52Y19jb2xzKTsgY291bnQrKykgew0KKwkJ
CWlmIChzY3JfcmVhZHcoZCkgIT0gdmMtPnZjX3ZpZGVvX2VyYXNlX2NoYXIp
IHsNCisJCQkJc2dpYXJjc19wdXRjKHZjLCB2Yy0+dmNfdmlkZW9fZXJhc2Vf
Y2hhciwNCisJCQkJCSAgICAgeSwgeCk7DQorCQkJCXNjcl93cml0ZXcodmMt
PnZjX3ZpZGVvX2VyYXNlX2NoYXIsIGQpOw0KKwkJCX0NCisJCQlkKys7DQor
CQkJaWYgKCsreCA9PSB2Yy0+dmNfY29scykgew0KKwkJCQl4ID0gMDsNCisJ
CQkJeSsrOw0KKwkJCX0NCisJCX0NCisJfQ0KKwlyZXR1cm4gMTsNCit9DQor
DQorc3RhdGljIHZvaWQgc2dpYXJjc19ibW92ZShzdHJ1Y3QgdmNfZGF0YSAq
dmMsIGludCBzeSwgaW50IHN4LCBpbnQgZHksDQorCQkJICBpbnQgZHgsIGlu
dCBoLCBpbnQgdykNCit7DQorCWlmIChzeSAhPSBkeSkNCisJCXBhbmljKCJz
Z2lhcmNzX2Jtb3ZlIHdpZHRoIHN5ICE9IGR5Iik7DQorDQorCWlmICgoKHN5
IDw9IGN1cnNvcl95KSAmJiAoY3Vyc29yX3kgPCBzeStoKSAmJg0KKwkgICAg
ICAoc3ggPD0gY3Vyc29yX3gpICYmIChjdXJzb3JfeCA8IHN4K3cpKSB8fA0K
KwkgICAgICgoZHkgPD0gY3Vyc29yX3kpICYmIChjdXJzb3JfeSA8IGR5K2gp
ICYmDQorCSAgICAgIChkeCA8PSBjdXJzb3JfeCkgJiYgKGN1cnNvcl94IDwg
ZHgrdykpKQ0KKwkJc2dpYXJjc19jdXJzb3IodmMsIENNX0VSQVNFKTsNCisN
CisJd2hpbGUgKGgtLSA+IDApIHsNCisJCXVuc2lnbmVkIHNob3J0ICpkID0g
KHVuc2lnbmVkIHNob3J0ICopKHZjLT52Y19vcmlnaW4gKyB2Yy0+dmNfc2l6
ZV9yb3cgKiBkeSArIGR4ICogMik7DQorCQl1bnNpZ25lZCBzaG9ydCAqcyA9
IGQgKyAoZHggLSBzeCk7DQorCQl1bnNpZ25lZCBzaG9ydCAqc3RhcnQgPSBk
Ow0KKwkJdW5zaWduZWQgc2hvcnQgKmxzID0gZDsNCisJCXVuc2lnbmVkIHNo
b3J0ICpsZSA9IGQgKyB3Ow0KKwkJdW5zaWduZWQgc2hvcnQgYzsNCisJCWlu
dCB4ID0gZHg7DQorCQl1bnNpZ25lZCBzaG9ydCBhdHRyID0gMTsNCisNCisJ
CWRvIHsNCisJCQljID0gc2NyX3JlYWR3KGQpOw0KKwkJCWlmIChhdHRyICE9
IChjICYgMHhmZjAwKSkgew0KKwkJCSAgICBhdHRyID0gYyAmIDB4ZmYwMDsg
DQorCQkJICAgIGlmIChkID4gc3RhcnQpIHsgDQorCQkJCXNnaWFyY3NfcHV0
Y3ModmMsIHN0YXJ0LCBkIC0gc3RhcnQsIGR5LCB4KTsNCisJCQkJeCArPSBk
IC0gc3RhcnQ7DQorCQkJCXN0YXJ0ID0gZDsNCisJCQkgICAgfQ0KKwkJCX0N
CisJCQlpZiAocyA+PSBscyAmJiBzIDwgbGUgJiYgYyA9PSBzY3JfcmVhZHco
cykpIHsNCisJCQkgICAgaWYgKGQgPiBzdGFydCkgew0KKwkJCQlzZ2lhcmNz
X3B1dGNzKHZjLCBzdGFydCwgZCAtIHN0YXJ0LCBkeSwgeCk7DQorCQkJCXgg
Kz0gZCAtIHN0YXJ0ICsgMTsNCisJCQkJc3RhcnQgPSBkICsgMTsNCisJCQkg
ICAgfSBlbHNlIHsNCisJCQkJeCsrOw0KKwkJCQlzdGFydCsrOw0KKwkJCSAg
ICB9DQorCQkJfQ0KKwkJCXMrKzsNCisJCQlkKys7DQorCQl9IHdoaWxlIChk
IDwgbGUpOw0KKwkJaWYgKGQgPiBzdGFydCkNCisJCSAgICBzZ2lhcmNzX3B1
dGNzKHZjLCBzdGFydCwgZCAtIHN0YXJ0LCBkeSwgeCk7DQorCQlzeSsrOw0K
KwkJZHkrKzsNCisJfQ0KK30NCisNCitzdGF0aWMgaW50IHNnaWFyY3NfZHVt
bXkoc3RydWN0IHZjX2RhdGEgKmMpDQorew0KKwlyZXR1cm4gMDsNCit9DQor
DQorI2RlZmluZSBEVU1NWSAodm9pZCAqKSBzZ2lhcmNzX2R1bW15DQorDQor
Y29uc3Qgc3RydWN0IGNvbnN3IHNnaWFyY3NfY29uID0gew0KKyAgICBjb25f
c3RhcnR1cDoJc2dpYXJjc19zdGFydHVwLA0KKyAgICBjb25faW5pdDoJCXNn
aWFyY3NfaW5pdCwNCisgICAgY29uX2RlaW5pdDoJCURVTU1ZLA0KKyAgICBj
b25fY2xlYXI6CQlzZ2lhcmNzX2NsZWFyLA0KKyAgICBjb25fcHV0YzoJCXNn
aWFyY3NfcHV0YywNCisgICAgY29uX3B1dGNzOgkJc2dpYXJjc19wdXRjcywN
CisgICAgY29uX2N1cnNvcjoJCXNnaWFyY3NfY3Vyc29yLA0KKyAgICBjb25f
c2Nyb2xsOgkJc2dpYXJjc19zY3JvbGwsDQorICAgIGNvbl9ibW92ZToJCXNn
aWFyY3NfYm1vdmUsDQorICAgIGNvbl9zd2l0Y2g6CQlzZ2lhcmNzX3N3aXRj
aCwNCisgICAgY29uX2JsYW5rOgkJc2dpYXJjc19ibGFuaywNCisgICAgY29u
X2ZvbnRfb3A6CXNnaWFyY3NfZm9udF9vcCwNCisgICAgY29uX3NldF9wYWxl
dHRlOglzZ2lhcmNzX3NldF9wYWxldHRlLA0KKyAgICBjb25fc2Nyb2xsZGVs
dGE6CXNnaWFyY3Nfc2Nyb2xsZGVsdGEsDQorICAgIGNvbl9zZXRfb3JpZ2lu
OglEVU1NWSwNCisgICAgY29uX3NhdmVfc2NyZWVuOglEVU1NWQ0KK307DQor
DQorI2lmZGVmIE1PRFVMRQ0KK2ludCBpbml0X21vZHVsZSh2b2lkKQ0KK3sN
CisJaWYgKCFzZ2lhcmNzX3N0YXJ0dXAoKSkNCisJCXByaW50aygiRXJyb3Ig
bG9hZGluZyBTR0lBUkNTIENvbnNvbGUgZHJpdmVyXG4iKTsNCisJZWxzZQ0K
KwkJcHJpbnRrKCJMb2FkaW5nIFNHSUFSQ1MgQ29uc29sZSBEcml2ZXJcbiIp
Ow0KKwl0YWtlX292ZXJfY29uc29sZSgmc2dpYXJjc19jb24sIDAsIE1BWF9O
Ul9DT05TT0xFUyAtIDEsIDEpOw0KKw0KKwlyZXR1cm4gMDsNCit9DQorDQor
aW50IGNsZWFudXBfbW9kdWxlKHZvaWQpDQorew0KKwlpbnQgaTsNCisNCisJ
cHJpbnRrKCJVbmxvYWRpbmcgU0dJQVJDUyBDb25zb2xlIERyaXZlclxuIik7
DQorCS8qIGZyZWUgbWVtb3J5IHVzZWQgYnkgdXNlciBmb250ICovDQorCWZv
ciAoaSA9IDA7IGkgPCBNQVhfTlJfQ09OU09MRVM7IGkrKykNCisJCXNnaWFy
Y3Nfc2V0X2RlZl9mb250KGksIE5VTEwpOw0KKw0KKwlyZXR1cm4gMDsNCit9
DQorI2VuZGlmDQotLS0gLi9pbmNsdWRlL2FzbS1taXBzL3NnaS9zZ2ltYy5o
Lm9yaWcJMjAwMi0wNS0xMyAyMzowOToyOS4wMDAwMDAwMDAgKzAyMDANCisr
KyAuL2luY2x1ZGUvYXNtLW1pcHMvc2dpL3NnaW1jLmgJMjAwMi0wNS0xMyAy
MzowOTo0My4wMDAwMDAwMDAgKzAyMDANCkBAIC0yMjQsNSArMjI0LDYgQEAN
CiAjZGVmaW5lIFNHSU1DX1NFRzFfU0laRV9JUDI2X0lQMjggICAweDIwMDAw
MDAwIC8qIDUxMk1CICovDQogDQogZXh0ZXJuIHZvaWQgc2dpbWNfaW5pdCh2
b2lkKTsNCitleHRlcm4gdm9pZCBzZ2ltY19leHAwNjQodm9pZCk7DQogDQog
I2VuZGlmIC8qIF9BU01fU0dJX1NHSU1DX0ggKi8NCi0tLSAuL2luY2x1ZGUv
YXNtLW1pcHMvc2dpYXJjcy5oLm9yaWcJMjAwMi0wNS0xMSAxNjozMTo1MS4w
MDAwMDAwMDAgKzAyMDANCisrKyAuL2luY2x1ZGUvYXNtLW1pcHMvc2dpYXJj
cy5oCTIwMDItMDUtMTEgMjA6Mjk6MDguMDAwMDAwMDAwICswMjAwDQpAQCAt
MzYwLDYgKzM2MCw1OCBAQA0KIAlpbnQgICAgICAgICAgICAgc21heDsgICAg
ICAgICAgICAgIC8qIE1heCAjIG9mIHN5bWJvbHMuICovDQogfTsNCiANCitz
dHJ1Y3Qgc2dpX3B2ZWN0b3Igew0KKwlMT05HCQlpb2N0bDsNCisJTE9ORwkJ
Z2V0X252cmFtX3RhYjsNCisJTE9ORwkJbG9hZF9hYnM7DQorCUxPTkcJCWlu
dm9rZV9hYnM7DQorCUxPTkcJCWV4ZWNfYWJzOw0KKwlMT05HCQlmc19yZWdp
c3RlcjsNCisJTE9ORwkJZnNfdW5yZWdpc3RlcjsNCisJTE9ORwkJc2lnbmFs
Ow0KKwlMT05HCQlnZXRfcHJvbWdmeDsNCit9Ow0KKw0KK3N0cnVjdCBzZ2lf
cHJvbWdmeCB7DQorCUxPTkcJCWdmeHZlY3RvcjsNCisJTE9ORwkJZ2Z4YWRk
cjsNCisJTE9ORwkJdW5rbm93bjFbOF07DQorCUxPTkcJCXdpZHRoOw0KKwlM
T05HCQloZWlnaHQ7DQorCUxPTkcJCXVua25vd24yWzEwXTsNCisJTE9ORwkJ
c3RhdGU7DQorfTsNCisNCitzdHJ1Y3Qgc2dpX3Byb21nZnhpbmZvIHsNCisJ
aW50CQlhZGRyOw0KKwlpbnQJCXdpZHRoOw0KKwlpbnQJCWhlaWdodDsNCit9
Ow0KKw0KK3N0cnVjdCBzZ2lfZ2Z4dmVjdG9yIHsNCisJTE9ORwkJQmxhbmtT
Y3JlZW47DQorCUxPTkcJCVNldENvbG9yOw0KKwlMT05HCQlTZXRDbWFwOw0K
KwlMT05HCQlEcmF3QmxvY2s7DQorCUxPTkcJCURyYXdQaXhlbDsNCisJTE9O
RwkJU2V0UG9zOw0KKwlMT05HCQlEcmF3Qml0bWFwOw0KKwlMT05HCQlNb3Zl
QmxvY2s7DQorCUxPTkcJCUluaXRTY3JlZW47DQorCUxPTkcJCVNldEN1cnNv
cjsNCit9Ow0KKw0KK3N0cnVjdCBzZ2lfZ2Z4Yml0bWFwIHsNCisJVVNIT1JU
ICoJYml0bWFwOw0KKwlVU0hPUlQJCXdpZHRoOw0KKwlVU0hPUlQJCWhlaWdo
dDsNCisJU0hPUlQJCW9mZng7DQorCVNIT1JUCQlvZmZ5Ow0KKwlTSE9SVAkJ
bW92ZXg7DQorCVNIT1JUCQltb3ZleTsNCisJVVNIT1JUCQlzaG9ydHNwZXJs
aW5lOw0KK307DQorDQogLyoNCiAgKiBNYWNyb3MgZm9yIGNhbGxpbmcgYSAz
Mi1iaXQgQVJDIGltcGxlbWVudGF0aW9uIGZyb20gNjQtYml0IGNvZGUNCiAg
Ki8NCkBAIC0zNzAsOSArNDIyLDkgQEANCiAJIiQyIiwiJDMiLCIkNCIsIiQ1
IiwiJDYiLCIkNyIsIiQ4IiwiJDkiLCIkMTAiLCIkMTEiLAkJXA0KIAkiJDEy
IiwiJDEzIiwiJDE0IiwiJDE1IiwiJDE2IiwiJDI0IiwiMjUiLCIkMzEiDQog
DQotI2RlZmluZSBBUkNfQ0FMTDAoZGVzdCkJCQkJCQkJXA0KKyNkZWZpbmUg
QVJDX0NBTEwwX1ZFQyh2ZWMsZGVzdCkJCQkJCQkJXA0KICh7CWxvbmcgX19y
ZXM7CQkJCQkJCVwNCi0JbG9uZyBfX3ZlYyA9IChsb25nKSByb212ZWMtPmRl
c3Q7CQkJCVwNCisJbG9uZyBfX3ZlYyA9IChsb25nKSAodmVjKS0+ZGVzdDsJ
CQkJXA0KIAlfX2FzbV9fIF9fdm9sYXRpbGVfXygJCQkJCQlcDQogCSJkc3Vi
dVx0JDI5LCAzMlxuXHQiCQkJCQkJXA0KIAkiamFsclx0JTFcblx0IgkJCQkJ
CQlcDQpAQCAtMzg0LDEwICs0MzYsMTAgQEANCiAJKHVuc2lnbmVkIGxvbmcp
IF9fcmVzOwkJCQkJCVwNCiB9KQ0KIA0KLSNkZWZpbmUgQVJDX0NBTEwxKGRl
c3QsYTEpCQkJCQkJXA0KKyNkZWZpbmUgQVJDX0NBTEwxX1ZFQyh2ZWMsZGVz
dCxhMSkJCQkJCQlcDQogKHsJbG9uZyBfX3JlczsJCQkJCQkJXA0KIAlyZWdp
c3RlciBzaWduZWQgaW50IF9fYTEgX19hc21fXygiJDQiKSA9IChpbnQpIChs
b25nKSAoYTEpOwlcDQotCWxvbmcgX192ZWMgPSAobG9uZykgcm9tdmVjLT5k
ZXN0OwkJCQlcDQorCWxvbmcgX192ZWMgPSAobG9uZykgKHZlYyktPmRlc3Q7
CQkJCVwNCiAJX19hc21fXyBfX3ZvbGF0aWxlX18oCQkJCQkJXA0KIAkiZHN1
YnVcdCQyOSwgMzJcblx0IgkJCQkJCVwNCiAJImphbHJcdCUxXG5cdCIJCQkJ
CQkJXA0KQEAgLTM5OSwxMSArNDUxLDExIEBADQogCSh1bnNpZ25lZCBsb25n
KSBfX3JlczsJCQkJCQlcDQogfSkNCiANCi0jZGVmaW5lIEFSQ19DQUxMMihk
ZXN0LGExLGEyKQkJCQkJCVwNCisjZGVmaW5lIEFSQ19DQUxMMl9WRUModmVj
LGRlc3QsYTEsYTIpCQkJCQkJXA0KICh7CWxvbmcgX19yZXM7CQkJCQkJCVwN
CiAJcmVnaXN0ZXIgc2lnbmVkIGludCBfX2ExIF9fYXNtX18oIiQ0IikgPSAo
aW50KSAobG9uZykgKGExKTsJXA0KIAlyZWdpc3RlciBzaWduZWQgaW50IF9f
YTIgX19hc21fXygiJDUiKSA9IChpbnQpIChsb25nKSAoYTIpOwlcDQotCWxv
bmcgX192ZWMgPSAobG9uZykgcm9tdmVjLT5kZXN0OwkJCQlcDQorCWxvbmcg
X192ZWMgPSAobG9uZykgKHZlYyktPmRlc3Q7CQkJCVwNCiAJX19hc21fXyBf
X3ZvbGF0aWxlX18oCQkJCQkJXA0KIAkiZHN1YnVcdCQyOSwgMzJcblx0IgkJ
CQkJCVwNCiAJImphbHJcdCUxXG5cdCIJCQkJCQkJXA0KQEAgLTQxNSwxMiAr
NDY3LDEyIEBADQogCV9fcmVzOwkJCQkJCQkJXA0KIH0pDQogDQotI2RlZmlu
ZSBBUkNfQ0FMTDMoZGVzdCxhMSxhMixhMykJCQkJCVwNCisjZGVmaW5lIEFS
Q19DQUxMM19WRUModmVjLGRlc3QsYTEsYTIsYTMpCQkJCQlcDQogKHsJbG9u
ZyBfX3JlczsJCQkJCQkJXA0KIAlyZWdpc3RlciBzaWduZWQgaW50IF9fYTEg
X19hc21fXygiJDQiKSA9IChpbnQpIChsb25nKSAoYTEpOwlcDQogCXJlZ2lz
dGVyIHNpZ25lZCBpbnQgX19hMiBfX2FzbV9fKCIkNSIpID0gKGludCkgKGxv
bmcpIChhMik7CVwNCiAJcmVnaXN0ZXIgc2lnbmVkIGludCBfX2EzIF9fYXNt
X18oIiQ2IikgPSAoaW50KSAobG9uZykgKGEzKTsJXA0KLQlsb25nIF9fdmVj
ID0gKGxvbmcpIHJvbXZlYy0+ZGVzdDsJCQkJXA0KKwlsb25nIF9fdmVjID0g
KGxvbmcpICh2ZWMpLT5kZXN0OwkJCQlcDQogCV9fYXNtX18gX192b2xhdGls
ZV9fKAkJCQkJCVwNCiAJImRzdWJ1XHQkMjksIDMyXG5cdCIJCQkJCQlcDQog
CSJqYWxyXHQlMVxuXHQiCQkJCQkJCVwNCkBAIC00MzIsMTMgKzQ4NCwxMyBA
QA0KIAlfX3JlczsJCQkJCQkJCVwNCiB9KQ0KIA0KLSNkZWZpbmUgQVJDX0NB
TEw0KGRlc3QsYTEsYTIsYTMsYTQpCQkJCQlcDQorI2RlZmluZSBBUkNfQ0FM
TDRfVkVDKHZlYyxkZXN0LGExLGEyLGEzLGE0KQkJCQkJXA0KICh7CWxvbmcg
X19yZXM7CQkJCQkJCVwNCiAJcmVnaXN0ZXIgc2lnbmVkIGludCBfX2ExIF9f
YXNtX18oIiQ0IikgPSAoaW50KSAobG9uZykgKGExKTsJXA0KIAlyZWdpc3Rl
ciBzaWduZWQgaW50IF9fYTIgX19hc21fXygiJDUiKSA9IChpbnQpIChsb25n
KSAoYTIpOwlcDQogCXJlZ2lzdGVyIHNpZ25lZCBpbnQgX19hMyBfX2FzbV9f
KCIkNiIpID0gKGludCkgKGxvbmcpIChhMyk7CVwNCiAJcmVnaXN0ZXIgc2ln
bmVkIGludCBfX2E0IF9fYXNtX18oIiQ3IikgPSAoaW50KSAobG9uZykgKGE0
KTsJXA0KLQlsb25nIF9fdmVjID0gKGxvbmcpIHJvbXZlYy0+ZGVzdDsJCQkJ
XA0KKwlsb25nIF9fdmVjID0gKGxvbmcpICh2ZWMpLT5kZXN0OwkJCQlcDQog
CV9fYXNtX18gX192b2xhdGlsZV9fKAkJCQkJCVwNCiAJImRzdWJ1XHQkMjks
IDMyXG5cdCIJCQkJCQlcDQogCSJqYWxyXHQlMVxuXHQiCQkJCQkJCVwNCkBA
IC00NTEsMTQgKzUwMywxNCBAQA0KIAlfX3JlczsJCQkJCQkJCVwNCiB9KQ0K
IA0KLSNkZWZpbmUgQVJDX0NBTEw1KGRlc3QsYTEsYTIsYTMsYTQsYTUpCQkJ
CQlcDQorI2RlZmluZSBBUkNfQ0FMTDVfVkVDKHZlYyxkZXN0LGExLGEyLGEz
LGE0LGE1KQkJCQkJXA0KICh7CWxvbmcgX19yZXM7CQkJCQkJCVwNCiAJcmVn
aXN0ZXIgc2lnbmVkIGludCBfX2ExIF9fYXNtX18oIiQ0IikgPSAoaW50KSAo
bG9uZykgKGExKTsJXA0KIAlyZWdpc3RlciBzaWduZWQgaW50IF9fYTIgX19h
c21fXygiJDUiKSA9IChpbnQpIChsb25nKSAoYTIpOwlcDQogCXJlZ2lzdGVy
IHNpZ25lZCBpbnQgX19hMyBfX2FzbV9fKCIkNiIpID0gKGludCkgKGxvbmcp
IChhMyk7CVwNCiAJcmVnaXN0ZXIgc2lnbmVkIGludCBfX2E0IF9fYXNtX18o
IiQ3IikgPSAoaW50KSAobG9uZykgKGE0KTsJXA0KIAlyZWdpc3RlciBzaWdu
ZWQgaW50IF9fYTUgPSAoYTUpOwkJCQlcDQotCWxvbmcgX192ZWMgPSAobG9u
Zykgcm9tdmVjLT5kZXN0OwkJCQlcDQorCWxvbmcgX192ZWMgPSAobG9uZykg
KHZlYyktPmRlc3Q7CQkJCVwNCiAJX19hc21fXyBfX3ZvbGF0aWxlX18oCQkJ
CQkJXA0KIAkiZHN1YnVcdCQyOSwgMzJcblx0IgkJCQkJCVwNCiAJInN3XHQl
NiwgMTYoJDI5KVxuXHQiCQkJCQkJXA0KQEAgLTQ3OCw1NyArNTMwLDU3IEBA
DQogI2lmIChkZWZpbmVkKENPTkZJR19NSVBTMzIpICYmIGRlZmluZWQoQ09O
RklHX0FSQzMyKSkgfHwJCVwNCiAgICAgKGRlZmluZWQoQ09ORklHX01JUFM2
NCkgJiYgZGVmaW5lZChDT05GSUdfQVJDMzIpKQ0KIA0KLSNkZWZpbmUgQVJD
X0NBTEwwKGRlc3QpCQkJCQkJCVwNCisjZGVmaW5lIEFSQ19DQUxMMF9WRUMo
dmVjLGRlc3QpCQkJCQkJCVwNCiAoewlsb25nIF9fcmVzOwkJCQkJCQlcDQot
CWxvbmcgKCpfX3ZlYykodm9pZCkgPSAodm9pZCAqKSByb212ZWMtPmRlc3Q7
CQkJXA0KKwlsb25nICgqX192ZWMpKHZvaWQpID0gKHZvaWQgKikgKHZlYykt
PmRlc3Q7CQkJXA0KIAkJCQkJCQkJCVwNCiAJX19yZXMgPSBfX3ZlYygpOwkJ
CQkJCVwNCiAJX19yZXM7CQkJCQkJCQlcDQogfSkNCiANCi0jZGVmaW5lIEFS
Q19DQUxMMShkZXN0LGExKQkJCQkJCVwNCisjZGVmaW5lIEFSQ19DQUxMMV9W
RUModmVjLGRlc3QsYTEpCQkJCQkJXA0KICh7CWxvbmcgX19yZXM7CQkJCQkJ
CVwNCiAJbG9uZyBfX2ExID0gKGxvbmcpIChhMSk7CQkJCQlcDQotCWxvbmcg
KCpfX3ZlYykobG9uZykgPSAodm9pZCAqKSByb212ZWMtPmRlc3Q7CQkJXA0K
Kwlsb25nICgqX192ZWMpKGxvbmcpID0gKHZvaWQgKikgKHZlYyktPmRlc3Q7
CQkJXA0KIAkJCQkJCQkJCVwNCiAJX19yZXMgPSBfX3ZlYyhfX2ExKTsJCQkJ
CQlcDQogCV9fcmVzOwkJCQkJCQkJXA0KIH0pDQogDQotI2RlZmluZSBBUkNf
Q0FMTDIoZGVzdCxhMSxhMikJCQkJCQlcDQorI2RlZmluZSBBUkNfQ0FMTDJf
VkVDKHZlYyxkZXN0LGExLGEyKQkJCQkJCVwNCiAoewlsb25nIF9fcmVzOwkJ
CQkJCQlcDQogCWxvbmcgX19hMSA9IChsb25nKSAoYTEpOwkJCQkJXA0KIAls
b25nIF9fYTIgPSAobG9uZykgKGEyKTsJCQkJCVwNCi0JbG9uZyAoKl9fdmVj
KShsb25nLCBsb25nKSA9ICh2b2lkICopIHJvbXZlYy0+ZGVzdDsJCVwNCisJ
bG9uZyAoKl9fdmVjKShsb25nLCBsb25nKSA9ICh2b2lkICopICh2ZWMpLT5k
ZXN0OwkJXA0KIAkJCQkJCQkJCVwNCiAJX19yZXMgPSBfX3ZlYyhfX2ExLCBf
X2EyKTsJCQkJCVwNCiAJX19yZXM7CQkJCQkJCQlcDQogfSkNCiANCi0jZGVm
aW5lIEFSQ19DQUxMMyhkZXN0LGExLGEyLGEzKQkJCQkJXA0KKyNkZWZpbmUg
QVJDX0NBTEwzX1ZFQyh2ZWMsZGVzdCxhMSxhMixhMykJCQkJCVwNCiAoewls
b25nIF9fcmVzOwkJCQkJCQlcDQogCWxvbmcgX19hMSA9IChsb25nKSAoYTEp
OwkJCQkJXA0KIAlsb25nIF9fYTIgPSAobG9uZykgKGEyKTsJCQkJCVwNCiAJ
bG9uZyBfX2EzID0gKGxvbmcpIChhMyk7CQkJCQlcDQotCWxvbmcgKCpfX3Zl
YykobG9uZywgbG9uZywgbG9uZykJPSAodm9pZCAqKSByb212ZWMtPmRlc3Q7
CVwNCisJbG9uZyAoKl9fdmVjKShsb25nLCBsb25nLCBsb25nKQk9ICh2b2lk
ICopICh2ZWMpLT5kZXN0OwlcDQogCQkJCQkJCQkJXA0KIAlfX3JlcyA9IF9f
dmVjKF9fYTEsIF9fYTIsIF9fYTMpOwkJCQlcDQogCV9fcmVzOwkJCQkJCQkJ
XA0KIH0pDQogDQotI2RlZmluZSBBUkNfQ0FMTDQoZGVzdCxhMSxhMixhMyxh
NCkJCQkJCVwNCisjZGVmaW5lIEFSQ19DQUxMNF9WRUModmVjLGRlc3QsYTEs
YTIsYTMsYTQpCQkJCQlcDQogKHsJbG9uZyBfX3JlczsJCQkJCQkJXA0KIAls
b25nIF9fYTEgPSAobG9uZykgKGExKTsJCQkJCVwNCiAJbG9uZyBfX2EyID0g
KGxvbmcpIChhMik7CQkJCQlcDQogCWxvbmcgX19hMyA9IChsb25nKSAoYTMp
OwkJCQkJXA0KIAlsb25nIF9fYTQgPSAobG9uZykgKGE0KTsJCQkJCVwNCi0J
bG9uZyAoKl9fdmVjKShsb25nLCBsb25nLCBsb25nLCBsb25nKSA9ICh2b2lk
ICopIHJvbXZlYy0+ZGVzdDsJXA0KKwlsb25nICgqX192ZWMpKGxvbmcsIGxv
bmcsIGxvbmcsIGxvbmcpID0gKHZvaWQgKikgKHZlYyktPmRlc3Q7CVwNCiAJ
CQkJCQkJCQlcDQogCV9fcmVzID0gX192ZWMoX19hMSwgX19hMiwgX19hMywg
X19hNCk7CQkJCVwNCiAJX19yZXM7CQkJCQkJCQlcDQogfSkNCiANCi0jZGVm
aW5lIEFSQ19DQUxMNShkZXN0LGExLGEyLGEzLGE0LGE1KQkJCQkJXA0KKyNk
ZWZpbmUgQVJDX0NBTEw1X1ZFQyh2ZWMsZGVzdCxhMSxhMixhMyxhNCxhNSkJ
CQkJCVwNCiAoewlsb25nIF9fcmVzOwkJCQkJCQlcDQogCWxvbmcgX19hMSA9
IChsb25nKSAoYTEpOwkJCQkJXA0KIAlsb25nIF9fYTIgPSAobG9uZykgKGEy
KTsJCQkJCVwNCkBAIC01MzYsMTEgKzU4OCwxOCBAQA0KIAlsb25nIF9fYTQg
PSAobG9uZykgKGE0KTsJCQkJCVwNCiAJbG9uZyBfX2E1ID0gKGxvbmcpIChh
NSk7CQkJCQlcDQogCWxvbmcgKCpfX3ZlYykobG9uZywgbG9uZywgbG9uZywg
bG9uZywgbG9uZyk7CQkJXA0KLQlfX3ZlYyA9ICh2b2lkICopIHJvbXZlYy0+
ZGVzdDsJCQkJCVwNCisJX192ZWMgPSAodm9pZCAqKSAodmVjKS0+ZGVzdDsJ
CQkJCVwNCiAJCQkJCQkJCQlcDQogCV9fcmVzID0gX192ZWMoX19hMSwgX19h
MiwgX19hMywgX19hNCwgX19hNSk7CQkJXA0KIAlfX3JlczsJCQkJCQkJCVwN
CiB9KQ0KICNlbmRpZiAvKiBib3RoIGtlcm5lbCBhbmQgQVJDIGVpdGhlciAz
Mi1iaXQgb3IgNjQtYml0ICovDQogDQorI2RlZmluZSBBUkNfQ0FMTDAoZGVz
dCkgQVJDX0NBTEwwX1ZFQyhyb212ZWMsZGVzdCkNCisjZGVmaW5lIEFSQ19D
QUxMMShkZXN0LGExKSBBUkNfQ0FMTDFfVkVDKHJvbXZlYyxkZXN0LGExKQ0K
KyNkZWZpbmUgQVJDX0NBTEwyKGRlc3QsYTEsYTIpIEFSQ19DQUxMMl9WRUMo
cm9tdmVjLGRlc3QsYTEsYTIpDQorI2RlZmluZSBBUkNfQ0FMTDMoZGVzdCxh
MSxhMixhMykgQVJDX0NBTEwzX1ZFQyhyb212ZWMsZGVzdCxhMSxhMixhMykN
CisjZGVmaW5lIEFSQ19DQUxMNChkZXN0LGExLGEyLGEzLGE0KSBBUkNfQ0FM
TDRfVkVDKHJvbXZlYyxkZXN0LGExLGEyLGEzLGE0KQ0KKyNkZWZpbmUgQVJD
X0NBTEw1KGRlc3QsYTEsYTIsYTMsYTQsYTUpIEFSQ19DQUxMNV9WRUMocm9t
dmVjLGRlc3QsYTEsYTIsYTMsYTQsYTUpDQorDQogI2VuZGlmIC8qIF9BU01f
U0dJQVJDU19IICovDQo=
--168484352-2043690147-1021368365=:14912--
