Received: with ECARTIS (v1.0.0; list linux-mips); Fri, 15 Jun 2007 16:57:19 +0100 (BST)
Received: from NeSTGROUP.NET ([203.200.158.40]:43956 "EHLO ns2.nestgroup.net")
	by ftp.linux-mips.org with ESMTP id S20022471AbXFOP5P convert rfc822-to-8bit
	(ORCPT <rfc822;linux-mips@linux-mips.org>);
	Fri, 15 Jun 2007 16:57:15 +0100
Received: from MAIL-TVM.tvm.nestgroup.net ([192.168.192.74])
	by ns2.nestgroup.net (8.13.1/8.13.1) with ESMTP id l5FG0nRN015562
	for <linux-mips@linux-mips.org>; Fri, 15 Jun 2007 21:30:49 +0530
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 8BIT
Subject: "Segfault/illegal instruction" - udevd - ntpd - glibc
Date:	Fri, 15 Jun 2007 21:23:34 +0530
Message-ID: <9A1299C7A40D7447A108107E951450CA01C9E015@MAIL-TVM.tvm.nestgroup.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: "Segfault/illegal instruction" - udevd - ntpd - glibc
Thread-Index: AcevZVs+b9/97TH7ROKu3oW///IoHw==
From:	"Sadarul Firos" <sadarul.firos@nestgroup.net>
To:	<linux-mips@linux-mips.org>
Return-Path: <sadarul.firos@nestgroup.net>
X-Envelope-To: <"|/home/ecartis/ecartis -s linux-mips"> (uid 0)
X-Orcpt: rfc822;linux-mips@linux-mips.org
Original-Recipient: rfc822;linux-mips@linux-mips.org
X-archive-position: 15428
X-ecartis-version: Ecartis v1.0.0
Sender: linux-mips-bounce@linux-mips.org
Errors-to: linux-mips-bounce@linux-mips.org
X-original-sender: sadarul.firos@nestgroup.net
Precedence: bulk
X-list: linux-mips

Hi all,

I am working with two MIPS based boards (one is MIPS and the other is
MIPSEL) running linux-2.6.18/glibc-2.3.5. I am performing a consecutive
reboot test on these boards. After some number of reboots (say 80) I  am
getting "segmentaion fault/illegal instruction" while running udevd and
ntpd during bootup. Upon observing the core dump, it is noted that the
segfault occured from the _init function of libnss_dns.so (in the case
of ntpd) and libnss_compat.so (in the case of udevd). I assume that
there might be a problem somewhere in the call_init function in
glibc-2.3.5/elf/dl-init.c. After I put some printf statements for
debugging in the call_init function, there is no segfault/illegal
instruction in the reboot testing. I have also used gdb to debug the
problem but the "segfault/illegal instruction" doesn't occur during the
reboot test. Could anyone please help me to sort out this problem. The
gdb output using coredump is attached.

Any help will be appreciated
Firos

-------------------------GDB O/P---------------------

-bash-3.00# gdb -c core udevd
GNU gdb 6.2.1
Copyright 2004 Free Software Foundation, Inc.
GDB is free software, covered by the GNU General Public License, and you
are welcome to change it and/or distribute copies of it under certain
conditions.
Type "show copying" to see the conditions.
There is absolutely no warranty for GDB. Type "show warranty" for
details.
This GDB was configured as "--host=i686-pc-linux-gnu
--target=mipsel-linux-gnu"...
Core was generated by `/sbin/udevd --daemon'.
Program terminated with signal 11, Segmentation fault.
Reading symbols from /lib/libgcc_s.so.1...done.
Loaded symbols for /lib/libgcc_s.so.1
Reading symbols from /lib/libc.so.6...done.
Loaded symbols for /lib/libc.so.6
Reading symbols from /lib/ld.so.1...done.
Loaded symbols for /lib/ld.so.1
Reading symbols from /lib/libnss_compat.so.2...done.
Loaded symbols for /lib/libnss_compat.so.2 Reading symbols from
/lib/libnsl.so.1...done.
Loaded symbols for /lib/libnsl.so.1
#0  0x2ad02ef8 in _init () from /lib/libnss_compat.so.2
(gdb)
(gdb) bt
#0  0x2ad02ef8 in _init () from /lib/libnss_compat.so.2
#1  0x00000001 in ?? ()
Cannot access memory at address 0xfffffffe
(gdb)

 
