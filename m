Received: with ECARTIS (v1.0.0; list linux-mips); Sat, 03 Jun 2006 06:36:42 +0200 (CEST)
Received: from ug-out-1314.google.com ([66.249.92.171]:53553 "EHLO
	ug-out-1314.google.com") by ftp.linux-mips.org with ESMTP
	id S8133360AbWFCEgd (ORCPT <rfc822;linux-mips@linux-mips.org>);
	Sat, 3 Jun 2006 06:36:33 +0200
Received: by ug-out-1314.google.com with SMTP id k3so813836ugf
        for <linux-mips@linux-mips.org>; Fri, 02 Jun 2006 21:36:32 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:cc:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=KqsGIpi41MpzYj3AdRimPCbCrNKsad5PliPVd33BR4FuFuCrVMNBCzMUoQqKWv419BQdlHkWPO/WtxjmOOaDYT7yO5QmitsXWumtxb0j+933S72QSBUb1KmjKhveikQZGr0L85GdY9x1cZ0lEoemPVixDbB7L0ZKr3SC53ty5gY=
Received: by 10.66.250.17 with SMTP id x17mr1385327ugh;
        Fri, 02 Jun 2006 21:36:32 -0700 (PDT)
Received: by 10.66.241.4 with HTTP; Fri, 2 Jun 2006 21:36:32 -0700 (PDT)
Message-ID: <50c9a2250606022136o72b979bfh8c93fc4bc0d696fa@mail.gmail.com>
Date:	Sat, 3 Jun 2006 12:36:32 +0800
From:	zhuzhenhua <zzh.hust@gmail.com>
To:	"Nigel Stephens" <nigel@mips.com>
Subject: Re: BFD: Warning: Writing section `.text' to huge (ie negative) file offset 0xa1ffff10
Cc:	"Thiemo Seufer" <ths@networkno.de>,
	linux-mips <linux-mips@linux-mips.org>
In-Reply-To: <44801CFF.1010400@mips.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <50c9a2250605312319v7480f2el36d9c0a052c85d5f@mail.gmail.com>
	 <20060601092413.GL1717@networkno.de>
	 <50c9a2250606010356s63f6d6e7j255c77660d6f472a@mail.gmail.com>
	 <447EE274.7060207@mips.com>
	 <50c9a2250606011749r7f89fbben2c61edd43c7ec0a6@mail.gmail.com>
	 <44801A59.5080508@mips.com> <44801CFF.1010400@mips.com>
Return-Path: <zzh.hust@gmail.com>
X-Envelope-To: <"|/home/ecartis/ecartis -s linux-mips"> (uid 0)
X-Orcpt: rfc822;linux-mips@linux-mips.org
Original-Recipient: rfc822;linux-mips@linux-mips.org
X-archive-position: 11656
X-ecartis-version: Ecartis v1.0.0
Sender: linux-mips-bounce@linux-mips.org
Errors-to: linux-mips-bounce@linux-mips.org
X-original-sender: zzh.hust@gmail.com
Precedence: bulk
X-list: linux-mips

On 6/2/06, Nigel Stephens <nigel@mips.com> wrote:
>
>
> Nigel Stephens wrote:
> >
> >>
> >>  8 .rodata       00000190  000000f0  000000f0  000000f0  2**4
> >>                  CONTENTS, ALLOC, LOAD, READONLY, DATA
> >>  9 .rodata.str1.4 000005fe  00000280  00000280  00000280  2**2
> >>                  CONTENTS, ALLOC, LOAD, READONLY, DATA
> >
> > OK. I think that the final .rodata.str1.4 section is causing your
> > problem because the offset between its load address and the other
> > section is huge, causing "objcopy -O binary" to generate a huge file.
> > This is a new section generated by gcc 3.x and above to hold mergeable
> > constant data. Try changing the line in your linker script which (I'm
> > guessing here) probably looks like this:
> >
> >    *(.rodata)
> >
> > to:
> >
> >     *(.rodata) *(.rodata.*)
> >
>
> I failed to spot that .rodata also has a "bad" load address. So it looks
> like .rodata also isn't correctly handled in your linker script.

you are right, i do not handle it correctly, and now i fixed it and
the objcopy run with out warning.


>
> Nigel
>
>
>

thanks for all above
Best Regards
zhuzhenhua
