Received: with ECARTIS (v1.0.0; list linux-mips); Fri, 08 Oct 2004 17:37:04 +0100 (BST)
Received: from avtrex.com ([IPv6:::ffff:216.102.217.178]:34584 "EHLO
	avtrex.com") by linux-mips.org with ESMTP id <S8225346AbUJHQg7>;
	Fri, 8 Oct 2004 17:36:59 +0100
Received: from avtrex.com ([192.168.0.111] RDNS failed) by avtrex.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Fri, 8 Oct 2004 09:36:54 -0700
Message-ID: <4166C206.8060000@avtrex.com>
Date: Fri, 08 Oct 2004 09:36:22 -0700
From: David Daney <ddaney@avtrex.com>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.4.1) Gecko/20031030
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: "John W. Linville" <linville@tuxdriver.com>,
	"T. P. Saravanan" <sara@procsys.com>
CC: MIPS Linux List <linux-mips@linux-mips.org>
Subject: glibc-2.3.3 patches for mips gcc-3.3.x and gcc-3.4.x
Content-Type: multipart/mixed;
 boundary="------------000301010103020504060307"
X-OriginalArrivalTime: 08 Oct 2004 16:36:54.0543 (UTC) FILETIME=[0544B1F0:01C4AD55]
Return-Path: <ddaney@avtrex.com>
X-Envelope-To: <"|/home/ecartis/ecartis -s linux-mips"> (uid 0)
X-Orcpt: rfc822;linux-mips@linux-mips.org
Original-Recipient: rfc822;linux-mips@linux-mips.org
X-archive-position: 5985
X-ecartis-version: Ecartis v1.0.0
Sender: linux-mips-bounce@linux-mips.org
Errors-to: linux-mips-bounce@linux-mips.org
X-original-sender: ddaney@avtrex.com
Precedence: bulk
X-list: linux-mips

This is a multi-part message in MIME format.
--------------000301010103020504060307
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

There has been some discussion about which patches are necessary to the
stock glibc-2.3.3 distribution to get it to compile and run on mips.

Attached is my patch.

I have built with both gcc-3.3.1 and gcc-3.4.2 and verified that I can run
busybox ash with both builds.

This is the configure command I used:

../glibc-2.3.3/configure --build=i686-linux --host=mipsel-linux
--enable-add-ons=linuxthreads --prefix=/usr
--with-headers=/newdisk/programs/linux/include --enable-kernel=2.4.25

Have fun with it.

David Daney.

--------------000301010103020504060307
Content-Type: application/x-gzip;
 name="glibc-2.3.3.diff.gz"
Content-Transfer-Encoding: base64
Content-Disposition: inline;
 filename="glibc-2.3.3.diff.gz"

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
--------------000301010103020504060307--
