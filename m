Received: (from majordomo@localhost)
	by oss.sgi.com (8.11.3/8.11.3) id f3IJ1JA14768
	for linux-mips-outgoing; Wed, 18 Apr 2001 12:01:19 -0700
Received: from ksmail.netcologne.de (ksmail.netcologne.de [194.8.194.97])
	by oss.sgi.com (8.11.3/8.11.3) with ESMTP id f3IJ1HM14764
	for <linux-mips@oss.sgi.com>; Wed, 18 Apr 2001 12:01:18 -0700
Received: from valen.metzler (dial-195-14-251-183.netcologne.de [195.14.251.183])
	by ksmail.netcologne.de (8.9.3/8.9.3) with ESMTP id VAA02581;
	Wed, 18 Apr 2001 21:01:15 +0200 (MET DST)
Received: (from rjkm@localhost)
	by valen.metzler (8.11.0/8.11.0/SuSE Linux 8.11.0-0.4) id f3IJ2GI03734;
	Wed, 18 Apr 2001 21:02:16 +0200
From: Ralph Metzler <rjkm@convergence.de>
Message-ID: <15069.58552.717979.620325@valen.metzler>
Date: Wed, 18 Apr 2001 21:02:16 +0200 (CEST)
To: Quinn Jensen <jensenq@Lineo.COM>
Cc: linux-mips@oss.sgi.com
Subject: Re: Linux on LSI EZ4102
In-Reply-To: <3ADDBFA2.7030608@Lineo.COM>
References: <15062.17293.403963.722517@valen.metzler>
	<3ADDBFA2.7030608@Lineo.COM>
X-Mailer: VM 6.72 under 21.1 (patch 10) "Capitol Reef" XEmacs Lucid
Mime-Version: 1.0 (generated by tm-edit 1.5)
Content-Type: text/plain; charset=US-ASCII
Sender: owner-linux-mips@oss.sgi.com
Precedence: bulk

Quinn Jensen writes:
 > Are the caches two-way (or more)?  If so, check
 > to see if the way select bit(s) are contiguous
 > with the offset for indexed cache operations.
 > If there is a hole, you have to flush in two
 > parts, or flush as if the cache was big enough
 > to span the hole.

The i-cache is two-way and the d-cache one-way.
Since I followed the LSI sample code quite closely when implementing
the flush calls I don't think that this is the problem.
(Although I found one bad bug in the LSI code, so maybe ...) 

I first based my port on the Linux version from linux-vr.sourceforge.net
which is a modified 2.4.0test9. Now it seems others have problems with
caching on that kernel with other MIPS architectures too. 
So, I'll better move to one of the 2.4.3-ac kernels first. I saw that
they contain quite a few changes, especially in the cache handling. 

Cheers,
Ralph
