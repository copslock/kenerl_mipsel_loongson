Received: (from majordomo@localhost)
	by oss.sgi.com (8.11.2/8.11.3) id f5BIPFJ17917
	for linux-mips-outgoing; Mon, 11 Jun 2001 11:25:15 -0700
Received: from ftpbox.mot.com (ftpbox.mot.com [129.188.136.101])
	by oss.sgi.com (8.11.2/8.11.3) with SMTP id f5BIPCV17906
	for <linux-mips@oss.sgi.com>; Mon, 11 Jun 2001 11:25:13 -0700
Received: [from pobox4.mot.com (pobox4.mot.com [10.64.251.243]) by ftpbox.mot.com (ftpbox 2.1) with ESMTP id LAA22787 for <linux-mips@oss.sgi.com>; Mon, 11 Jun 2001 11:25:10 -0700 (MST)]
Received: [from craius.cportcorp.com ([10.14.72.61]) by pobox4.mot.com (MOT-pobox4 2.0) with ESMTP id LAA05430 for <linux-mips@oss.sgi.com>; Mon, 11 Jun 2001 11:25:10 -0700 (MST)]
Received: from cportcorp.com (FRANZ [10.14.73.85]) by craius.cportcorp.com with SMTP (Microsoft Exchange Internet Mail Service Version 5.5.2650.21)
	id MTALJHMT; Mon, 11 Jun 2001 14:24:11 -0400
Message-ID: <3B250CF9.8C966EC9@cportcorp.com>
Date: Mon, 11 Jun 2001 14:24:57 -0400
From: Bob Zulawnik <bob.zulawnik@cportcorp.com>
X-Mailer: Mozilla 4.7 [en] (WinNT; U)
X-Accept-Language: en
MIME-Version: 1.0
To: hjl@lucon.org
CC: gdb@sourceware.cygnus.com, binutils@sourceware.cygnus.com,
   linux-mips@oss.sgi.com
Subject: Re: stabs or ecoff for Linux/mips
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Sender: owner-linux-mips@oss.sgi.com
Precedence: bulk

"H . J . Lu" wrote:

> That matches my own experiences. In case you haven't noticed, I
> have checked in patches to switch Linux/mips to stabs in ELF :-).

For what it's worth : stabs format cannot express certain types
of debug info that mdebug (used in ecoff) can. An example of
that is so-called PDRs (Procedure Description Records) - they
describe frame size, register masks etc.). Thus, in order to
obtain information about a function (e.g. when setting a
breakpoint at the entrance to a function), gdb has to resort to 
heuristics and read the function prolog, trying to figure out
what registers are saved where, when is the frame setup complete
etc. There are assumptions made in that gdb code  (e.g.
mips32_heuristic_proc_desc() and mips16_heuristic_proc_desc())
that have to match exactly what the compiler has done (as in
"the occurrence of instruction 'x' signifies this"). Thus,
using the stabs opens the debugger to potential misinterpretations
of the code generated by the compiler (e.g. when a new type
of frame is introduced, or maybe with some weird optimization).
I understand that there are other arguments for using stabs and 
that dwarf2 is the long-term goal, this is just an FYI. 

Bob Zulawnik
