Received: with ECARTIS (v1.0.0; list linux-mips); Sat, 12 Nov 2016 00:11:55 +0100 (CET)
Received: from mga05.intel.com ([192.55.52.43]:40191 "EHLO mga05.intel.com"
        rhost-flags-OK-OK-OK-OK) by eddie.linux-mips.org with ESMTP
        id S23992160AbcKKXLrxaffu (ORCPT <rfc822;linux-mips@linux-mips.org>);
        Sat, 12 Nov 2016 00:11:47 +0100
Received: from fmsmga003.fm.intel.com ([10.253.24.29])
  by fmsmga105.fm.intel.com with ESMTP; 11 Nov 2016 15:11:40 -0800
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="5.31,474,1473145200"; 
   d="scan'208";a="785461103"
Received: from sandyjin-mobl2.ccr.corp.intel.com (HELO wfg-t540p.sh.intel.com) ([10.254.212.70])
  by FMSMGA003.fm.intel.com with ESMTP; 11 Nov 2016 15:11:38 -0800
Received: from wfg by wfg-t540p.sh.intel.com with local (Exim 4.87)
        (envelope-from <fengguang.wu@intel.com>)
        id 1c5Kyv-0005pk-DU; Sat, 12 Nov 2016 07:11:37 +0800
Date:   Sat, 12 Nov 2016 07:11:37 +0800
From:   Fengguang Wu <fengguang.wu@intel.com>
To:     Paul Burton <paul.burton@imgtec.com>
Cc:     James Hogan <james.hogan@imgtec.com>,
        Greg KH <gregkh@linuxfoundation.org>,
        Jiri Slaby <jslaby@suse.cz>, stable@vger.kernel.org,
        Paolo Bonzini <pbonzini@redhat.com>,
        Radim =?utf-8?B?S3LEjW3DocWZ?= <rkrcmar@redhat.com>,
        Ralf Baechle <ralf@linux-mips.org>, linux-mips@linux-mips.org,
        kvm@vger.kernel.org
Subject: Re: [BACKPORT PATCH 3.10..3.16] KVM: MIPS: Drop other CPU ASIDs on
 guest MMU changes
Message-ID: <20161111231137.57okzoy7ixrrulyc@wfg-t540p.sh.intel.com>
References: <20161109144624.16683-1-james.hogan@imgtec.com>
 <20161110173721.GD7075@jhogan-linux.le.imgtec.org>
 <20161111025621.vwa3irwbj56uezhl@wfg-t540p.sh.intel.com>
 <4833601.FN2Qs9JE2h@np-p-burton>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Disposition: inline
In-Reply-To: <4833601.FN2Qs9JE2h@np-p-burton>
User-Agent: Mutt/1.6.2-neo (2016-08-08)
Return-Path: <fengguang.wu@intel.com>
X-Envelope-To: <"|/home/ecartis/ecartis -s linux-mips"> (uid 0)
X-Orcpt: rfc822;linux-mips@linux-mips.org
Original-Recipient: rfc822;linux-mips@linux-mips.org
X-archive-position: 55789
X-ecartis-version: Ecartis v1.0.0
Sender: linux-mips-bounce@linux-mips.org
Errors-to: linux-mips-bounce@linux-mips.org
X-original-sender: fengguang.wu@intel.com
Precedence: bulk
List-help: <mailto:ecartis@linux-mips.org?Subject=help>
List-unsubscribe: <mailto:ecartis@linux-mips.org?subject=unsubscribe%20linux-mips>
List-software: Ecartis version 1.0.0
List-Id: linux-mips <linux-mips.eddie.linux-mips.org>
X-List-ID: linux-mips <linux-mips.eddie.linux-mips.org>
List-subscribe: <mailto:ecartis@linux-mips.org?subject=subscribe%20linux-mips>
List-owner: <mailto:ralf@linux-mips.org>
List-post: <mailto:linux-mips@linux-mips.org>
List-archive: <http://www.linux-mips.org/archives/linux-mips/>
X-list: linux-mips

Hi Paul,

On Fri, Nov 11, 2016 at 08:58:54AM +0000, Paul Burton wrote:
>Hi Fengguang,
>
>On Friday, 11 November 2016 10:56:21 GMT Fengguang Wu wrote:
>> The 0-day build bot should already cover the below configs (not
>> necessarily in the early hours, but very likely in the first day after
>> your git push) since they are included in arch/*/configs/.
>
><snip>
>
>> >- malta_kvm_defconfig
>> >
>> >  this probably doesn't need to be a high priority build, but other
>> >  configs don't yet cover MIPS KVM so its worth having (that bit us
>> >  recently with 3.12 and 4.4 stable branches).
>> >
>> >- 64r6el_defconfig and 32r2_defconfig (4.9 and later)
>> >
>> >  these are just a couple of the new generic/multiplatform kernel
>> >  configurations added in 4.9 (Paul Burton Cc'd). There are others too,
>> >  but these will probably give decent coverage. These are likely to be
>> >  increasingly relevant as more/new platforms are converted to use it.
>> >  (note, the r6 one may require a newish toolchain).
>
>Just wanted to note that this isn't true for the 64r6el_defconfig &
>32r2_defconfig (or similarly other variations of architecture revision &
>endianness). They aren't files under arch/mips/configs/, instead these configs
>are generated by merging a bunch of config fragments atop arch/mips/configs/
>generic_defconfig. This allows us to have these minor variations on the base
>generic_defconfig without duplicating its content & incurring the maintenance
>headache of keeping them all in sync. For reference powerpc do similar things
>to generate variations upon their real defconfigs.
>
>If you do have a way to get 64r6el_defconfig & 32r2_defconfig included that
>would be great, since more MIPS boards should be covered by these generic
>configurations over the next few cycles.

Got it, thank you for the explanations! It's very helpful to get the
tips on what set of kconfigs should be included in the minimal test
coverage.

I'll add 64r6el_defconfig and 32r2_defconfig to the list.
It looks will merge several configs together:

wfg@inn ~/linux/obj-compiletest% make ARCH=mips 64r6el_defconfig
/usr/bin/make -C source O=/home/wfg/linux/obj-compiletest ARCH=mips CROSS_COMPILE=/usr/local/gcc-4.6.3-nolibc/mips-linux/bin/mips-linux- -j32 ARCH=mips 64r6el_defconfig
make: Entering directory '/c/wfg/linux'
make[1]: Entering directory '/c/wfg/linux/obj-compiletest'
Using ../arch/mips/configs/generic_defconfig as base
Merging ../arch/mips/configs/generic/64r6.config
Merging ../arch/mips/configs/generic/el.config
Merging ../arch/mips/configs/generic/board-sead-3.config
#
# merged configuration written to .config (needs make)
#
scripts/kconfig/conf  --olddefconfig Kconfig
#
# configuration written to .config
#
make[1]: Leaving directory '/c/wfg/linux/obj-compiletest'
make: Leaving directory '/c/wfg/linux'

Regards,
Fengguang
