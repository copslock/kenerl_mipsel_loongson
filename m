Received: (from majordomo@localhost)
	by oss.sgi.com (8.11.2/8.11.3) id g2EIXjA16481
	for linux-mips-outgoing; Thu, 14 Mar 2002 10:33:45 -0800
Received: from hell (buserror-extern.convergence.de [212.84.236.66])
	by oss.sgi.com (8.11.2/8.11.3) with SMTP id g2EIXe916478
	for <linux-mips@oss.sgi.com>; Thu, 14 Mar 2002 10:33:40 -0800
Received: from js by hell with local (Exim 3.35 #1 (Debian))
	id 16la3c-0001XZ-00; Thu, 14 Mar 2002 19:34:32 +0100
Date: Thu, 14 Mar 2002 19:34:32 +0100
From: Johannes Stezenbach <js@convergence.de>
To: Thiemo Seufer <ica2_ts@csv.ica.uni-stuttgart.de>
Cc: linux-mips@oss.sgi.com
Subject: Re: Q: -mcpu= vs. -march= for VR41xx specific instructions
Message-ID: <20020314183432.GA5802@convergence.de>
Mail-Followup-To: Johannes Stezenbach <js@convergence.de>,
	Thiemo Seufer <ica2_ts@csv.ica.uni-stuttgart.de>,
	linux-mips@oss.sgi.com
References: <20020314172502.GA5365@convergence.de> <20020314181031.GC398@rembrandt.csv.ica.uni-stuttgart.de>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <20020314181031.GC398@rembrandt.csv.ica.uni-stuttgart.de>
User-Agent: Mutt/1.3.27i
Sender: owner-linux-mips@oss.sgi.com
Precedence: bulk

On Thu, Mar 14, 2002 at 07:10:31PM +0100, Thiemo Seufer wrote:
> Johannes Stezenbach wrote:
> >   GCCFLAGS += -Wa,-march=vr4100 -mips2 -Wa,--trap
> > 
> > This works, but I am unshure what the effects of the
> > missing -mcpu switch are wrt the code generated by gcc.
> > AFAICS the kernel still works, but is the generated
> > code slower or subtly incorrect?
> 
> I don't know what the compiler does then. I assume it defaults to
> r3000 scheduling/opcodes.

How bad is that compared to -mcpu=vr4100?

> I would suggest the syntax
> 
> 	.set march=vr4100
> 
> This is in my TODO list for gas, but don't hold your breath.

OK.

> The real fix is to use a newer compiler (gcc >= 3). :-)

Not too long ago people here told me that gcc 3.x is still
not ready for production use. Or is gcc-3.1-pre from CVS
ready for prime time?


Thanks,
Johannes
