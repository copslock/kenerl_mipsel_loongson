Received: from oss.sgi.com (localhost.localdomain [127.0.0.1])
	by oss.sgi.com (8.12.3/8.12.3) with ESMTP id g3H0IV8d024990
	for <linux-mips-outgoing@oss.sgi.com>; Tue, 16 Apr 2002 17:18:31 -0700
Received: (from majordomo@localhost)
	by oss.sgi.com (8.12.3/8.12.3/Submit) id g3H0IV0l024989
	for linux-mips-outgoing; Tue, 16 Apr 2002 17:18:31 -0700
X-Authentication-Warning: oss.sgi.com: majordomo set sender to owner-linux-mips@oss.sgi.com using -f
Received: from crack-ext.ab.videon.ca (crack-ext.ab.videon.ca [206.75.216.33])
	by oss.sgi.com (8.12.3/8.12.3) with SMTP id g3H0Hg8d024961
	for <linux-mips@oss.sgi.com>; Tue, 16 Apr 2002 17:17:42 -0700
Received: (qmail 25148 invoked from network); 17 Apr 2002 00:18:31 -0000
Received: from unknown (HELO wakko.debian.net) ([24.86.210.128]) (envelope-sender <jgg@debian.org>)
          by crack-ext.ab.videon.ca (qmail-ldap-1.03) with SMTP
          for <hamilton@redhat.com>; 17 Apr 2002 00:18:30 -0000
Received: from localhost
	([127.0.0.1] helo=wakko.debian.net ident=jgg)
	by wakko.debian.net with smtp (Exim 3.16 #1 (Debian))
	id 16xd9c-0004nv-00; Tue, 16 Apr 2002 18:18:32 -0600
Date: Tue, 16 Apr 2002 18:18:32 -0600 (MDT)
From: Jason Gunthorpe <jgg@debian.org>
X-Sender: jgg@wakko.debian.net
Reply-To: Jason Gunthorpe <jgg@debian.org>
To: Louis Hamilton <hamilton@redhat.com>
cc: linux-mips@oss.sgi.com
Subject: Re: Patch SR71K support - questions
In-Reply-To: <3CBC88C5.1000604@redhat.com>
Message-ID: <Pine.LNX.3.96.1020416175449.18447A-200000@wakko.debian.net>
MIME-Version: 1.0
Content-Type: MULTIPART/MIXED; BOUNDARY="1444446418-1735939474-1019002712=:18447"
Sender: owner-linux-mips@oss.sgi.com
Precedence: bulk

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.
  Send mail to mime@docserver.cac.washington.edu for more info.

--1444446418-1735939474-1019002712=:18447
Content-Type: TEXT/PLAIN; charset=US-ASCII


On Tue, 16 Apr 2002, Louis Hamilton wrote:

> What happens is the kernel comes up to the point in init where /sbin/init is
> execve'd and hangs (or waits) forever.  Since our QED RM7000 module 
> (which we also ported) is able to bootup all the way we don't suspect 
> file system problems.

You may want to try disabling support for WAIT, if the errata fix is not
properly engaging for some reason you might hang in init.

> At the load_mmu stage of bring-up I noticed I cannot call the 
> "clear_enable_caches" routine without suffering an exeception.  This is in 
> arch/mips/mm/c-sr71000.c, routine
> ld_mmu_sr71000 where the call is made to clear_enable_caches as a KSEG1 
> address.

That's a bit odd, Linux type exceptions are generally not active when
cache init is done - so the exception must come from pmon?

My stuff was tested without a monitor program like pmon, Linux is the
first thing the processor executed when it came out of reset. The only
init done (in prom_init) is to set the tcache size and enable the tcache
bits.

> I noticed the config register K0 is already set (before load_mmu) to 0x3 
> (Cached, Write-back)
> and that L2, L3 are enabled, no doubt due to some init done by the PMON 
> monitor.

You definately do not want to try to cache init if the caches are turned
on, it will blow away any pending writebacks. This is true on the RM7K
code too, so I'm not sure what the proper solution should be.

This may be why you see it crash when it runs, the stack/etc could be
trashed if kseg0 caching is enabled when cec is called.

Presumably your pmon has been hacked to support SR71K - if it it
touching the caches it is really not safe to use stuff made for RM7K on
the SR71K.

I have tested this on the SR71010A-600 chips, with and without tcache.

> Is this the latest SR71K support patch?  (I can't get access in my 
> browser to
> http://oss.sgi.com/mips/archive to see prior postings on this...)

It is the latest I have posted, internally I have a version that is
against a newer 2.4 kernel, has a bug fix for the cec routine and has the
right name for the chip (woops).

I don't have time to make a proper diff right now, but I have attached
the mm/c-sr71000.c file (note the name change) I don't think the rest of
the patch has really been changed.

Jason


--1444446418-1735939474-1019002712=:18447
Content-Type: TEXT/x-csrc; name="c-sr71000.c"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.LNX.3.96.1020416181832.18447B@wakko.debian.net>
Content-Description: 

LyoNCiAgSmFzb24gR3VudGhvcnBlIDxqZ2dAeW90dGF5b3R0YS5jb20+DQog
IENvcHlyaWdodCAoQykgMjAwMiBZb3R0YVlvdHRhLiBJbmMuDQogICANCiAg
QmFzZWQgb24gYy1taXBzMzI6DQogIEtldmluIEQuIEtpc3NlbGwsIGtldmlu
a0BtaXBzLmNvbSBhbmQgQ2Fyc3RlbiBMYW5nZ2FhcmQsIGNhcnN0ZW5sQG1p
cHMuY29tDQogIENvcHlyaWdodCAoQykgMjAwMCBNSVBTIFRlY2hub2xvZ2ll
cywgSW5jLiAgQWxsIHJpZ2h0cyByZXNlcnZlZC4NCg0KICBUaGlzIGZpbGUg
aXMgc3ViamVjdCB0byB0aGUgdGVybXMgYW5kIGNvbmRpdGlvbnMgb2YgdGhl
IEdOVSBHZW5lcmFsIFB1YmxpYw0KICBMaWNlbnNlLiAgU2VlIHRoZSBmaWxl
ICJDT1BZSU5HIiBpbiB0aGUgbWFpbiBkaXJlY3Rvcnkgb2YgdGhpcyBhcmNo
aXZlDQogIGZvciBtb3JlIGRldGFpbHMuDQogICANCiAgU2FuZGNyYWZ0IFNS
NzEwMDAgY2FjaGUgcm91dGluZXMuIA0KICBUaGUgU1I3MTAwMCBpcyBhIE1J
UFM2NCBjb21wYXRpYmxlIENQVSB3aXRoIDQgY2FjaGVzOg0KICAgKiA0IHdh
eSAzMksgcHJpbWFyeSBJQ2FjaGUgLSB2aXJ0dWFsbHkgaW5kZXhlZC9waHlz
aWNhbGx5IHRhZ2dlZA0KICAgKiA0IHdheSAzMksgcHJpbWFyeSBEQ2FjaGUg
LSB2aXJ0dWFsbHkgaW5kZXhlZC9waHlzaWNhbGx5IHRhZ2dlZA0KICAgKiA4
IHdheSA1MTJLIHNlY29uZGFyeSBjYWNoZSAtIHBoeXNpY2FsbHkgaW5kZXhl
ZC90YWdlZA0KICAgKiA4IHdheSB1cCB0byAxNk0gdGVydGlhcnkgY2FjaGUg
LSBwaHlzaWNhbGx5IGluZGV4ZWQvdGFnZWQgKGFuZCBvZmYgY2hpcCkNCiAg
IA0KICBJQ2FjaGUgYW5kIERDYWNoZSBkbyBub3QgaGF2ZSBhbnkgc29ydCBv
ZiBzbm9vcGluZy4gVW5saWtlIHRoZSBSTTdrLA0KICB0aGUgdmlydHVhbCBp
bmRleCBpcyAxMyBiaXRzLCBhbmQgd2UgdXNlIGEgNGsgcGFnZSBzaXplLiBU
aGlzIG1lYW5zIHlvdSANCiAgY2FuIGhhdmUgY2FjaGUgYWxpYXNpbmcgZWZm
ZWN0cywgc28gdGhleSBoYXZlIHRvIGJlIHRyZWF0ZWQgYXMgdmlydHVhbGx5
DQogIHRhZ2dlZC4gKHVubGVzcyB0aGF0IGNhbiBiZSBzb2x2ZWQgZWxzZXdo
ZXJlLCBzaG91bGQgaW52ZXN0aWdhdGUpDQoNCiAgTm90ZSB0aGF0IG9uIHRo
aXMgY2hpcCBhbGwgdGhlIF9TRCB0eXBlIGNhY2hlIG9wcyAoaWUgSGl0X1dy
aXRlYmFja19JbnZfU0QpDQogIGFyZSByZWFsbHkganVzdCBfUy4gVGhpcyBp
cyBpbiBsaW5lIHdpdGggd2hhdCB0aGUgTUlQUzY0IHNwZWMgcGVybWl0cy4N
CiAgQWxzbywgdGhlIGxpbmUgc2l6ZSBvZiB0aGUgdGVydGlhcnkgY2FjaGUg
aXMgcmVhbGx5IHRoZSBibG9jayBzaXplLiBUaGUNCiAgbGluZSBzaXplIGlz
IGFsd2F5cyAzMiBieXRlcy4gVGhlIGNoaXAgY2FuIHRhZyBwYXJ0aWFsIGJs
b2NrcyBhbmQgdGhlIGNhY2hlDQogIG9wIGluc3RydWN0aW9ucyB3b3JrIG9u
IHRob3NlIHBhcnRpYWwgYmxvY2tzIHRvby4gDQogIA0KICBTZWUgLi9Eb2N1
bWVudGF0aW9uL2NhY2hldGxiLnR4dA0KICovDQojaW5jbHVkZSA8bGludXgv
aW5pdC5oPg0KI2luY2x1ZGUgPGxpbnV4L2tlcm5lbC5oPg0KI2luY2x1ZGUg
PGxpbnV4L3NjaGVkLmg+DQojaW5jbHVkZSA8bGludXgvbW0uaD4NCg0KI2lu
Y2x1ZGUgPGFzbS9ib290aW5mby5oPg0KI2luY2x1ZGUgPGFzbS9jcHUuaD4N
CiNpbmNsdWRlIDxhc20vYmNhY2hlLmg+DQojaW5jbHVkZSA8YXNtL2lvLmg+
DQojaW5jbHVkZSA8YXNtL3BhZ2UuaD4NCiNpbmNsdWRlIDxhc20vcGd0YWJs
ZS5oPg0KI2luY2x1ZGUgPGFzbS9zeXN0ZW0uaD4NCiNpbmNsdWRlIDxhc20v
bW11X2NvbnRleHQuaD4NCg0KLy8gU2hvdWxkIG1vdmUgdG8gbWlwc3JlZ3Mu
aCANCiNkZWZpbmUgcmVhZF8zMmJpdF9jcDBfcmVnaXN0ZXJ4KHNvdXJjZSxz
ZWwpICAgICAgICAgICAgICAgICAgICBcDQooeyBpbnQgX19yZXM7ICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
XA0KICAgICAgICBfX2FzbV9fIF9fdm9sYXRpbGVfXyggICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIFwNCgkiLnNldFx0cHVzaFxuXHQiCQkJ
CQlcDQoJIi5zZXRcdHJlb3JkZXJcblx0IgkJCQkJXA0KCSIuc2V0XHRtaXBz
NjRcblx0IgkJCQkJXA0KICAgICAgICAibWZjMFx0JTAsIlNUUihzb3VyY2Up
IiwiU1RSKHNlbCkiXG5cdCIgICAgICAgICAgICAgICAgIFwNCgkiLnNldFx0
bWlwczBcblx0IgkJCQkJXA0KCSIuc2V0XHRwb3AiCQkJCQkJXA0KICAgICAg
ICA6ICI9ciIgKF9fcmVzKSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIFwNCiAgICAgICAgX19yZXM7fSkNCiNkZWZpbmUgd3Jp
dGVfMzJiaXRfY3AwX3JlZ2lzdGVyeChyZWdpc3RlcixzZWwsdmFsdWUpICAg
ICAgICAgICBcDQogICAgICAgIF9fYXNtX18gX192b2xhdGlsZV9fKCAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXA0KCSIuc2V0XHRtaXBz
NjRcblx0IgkJCQkJXA0KICAgICAgICAibXRjMFx0JTAsIlNUUihyZWdpc3Rl
cikiLCJTVFIoc2VsKSJcblx0IgkJXA0KCSIuc2V0XHRtaXBzMFxuXHQiCQkJ
CQlcDQoJIm5vcCIJCQkJCQkJXA0KICAgICAgICA6IDogInIiICh2YWx1ZSkp
Ow0KDQojdW5kZWYgREVCVUdfQ0FDSEUNCg0KLyogUHJpbWFyeSBjYWNoZSBw
YXJhbWV0ZXJzLiAqLw0KaW50IGljYWNoZV9zaXplLCBkY2FjaGVfc2l6ZTsg
CQkJLyogU2l6ZSBpbiBieXRlcyAqLw0KaW50IGljX2xzaXplLCBkY19sc2l6
ZTsJCQkJLyogTGluZVNpemUgaW4gYnl0ZXMgKi8NCg0KLyogU2Vjb25kYXJ5
IGNhY2hlIHBhcmFtZXRlcnMuICovDQp1bnNpZ25lZCBpbnQgc2NhY2hlX3Np
emUsIHNjX2xzaXplOwkJLyogQWdhaW4sIGluIGJ5dGVzICovDQoNCi8qIHRl
cnRpYXJ5IGNhY2hlIChpZiBwcmVzZW50KSBwYXJhbWV0ZXJzLiAqLw0KdW5z
aWduZWQgaW50IHRjYWNoZV9zaXplLCB0Y19sc2l6ZTsJCS8qIEFnYWluLCBp
biBieXRlcyAqLw0KDQojaW5jbHVkZSA8YXNtL2NhY2hlb3BzLmg+DQojaW5j
bHVkZSA8YXNtL21pcHMzMl9jYWNoZS5oPg0KDQovLyBVbmlxdWUgdGhlIFNS
NzEwMDANCiNkZWZpbmUgSW5kZXhfSW52YWxpZGF0ZV9UIDB4Mg0KI2RlZmlu
ZSBIaXRfSW52YWxpZGF0ZV9UIDB4MTYNCnN0YXRpYyBpbmxpbmUgdm9pZCBi
bGFzdF90Y2FjaGUodm9pZCkNCnsNCgl1bnNpZ25lZCBsb25nIHN0YXJ0ID0g
S1NFRzA7DQoJdW5zaWduZWQgbG9uZyBlbmQgPSBLU0VHMCArIHRjYWNoZV9z
aXplOw0KCQ0KCS8vIENvdWxkIHVzZSBmbGFzaCBpbnZhbGlkYXRlIHBlcmhh
cHMuLg0KCXdoaWxlKHN0YXJ0IDwgZW5kKQ0KCXsNCgkJY2FjaGVfdW5yb2xs
KHN0YXJ0LEluZGV4X0ludmFsaWRhdGVfVCk7DQoJCXN0YXJ0ICs9IHRjX2xz
aXplOw0KCX0JDQp9DQoNCnN0YXRpYyBpbmxpbmUgdm9pZCBmbHVzaF90Y2Fj
aGVfbGluZSh1bnNpZ25lZCBsb25nIGFkZHIpDQp7DQoJX19hc21fXyBfX3Zv
bGF0aWxlX18NCgkJKA0KCQkgIi5zZXQgbm9yZW9yZGVyXG5cdCINCgkJICIu
c2V0IG1pcHMzXG5cdCINCgkJICJjYWNoZSAlMSwgKCUwKVxuXHQiDQoJCSAi
LnNldCBtaXBzMFxuXHQiDQoJCSAiLnNldCByZW9yZGVyIg0KCQkgOg0KCQkg
OiAiciIgKGFkZHIpLA0KCQkgImkiIChIaXRfSW52YWxpZGF0ZV9UKSk7DQp9
DQoNCi8qDQogKiBEdW1teSBjYWNoZSBoYW5kbGluZyByb3V0aW5lcyBmb3Ig
bWFjaGluZXMgd2l0aG91dCBib2FyZGNhY2hlcw0KICovDQpzdGF0aWMgdm9p
ZCBub19zY19ub29wKHZvaWQpIHt9DQoNCnN0YXRpYyBzdHJ1Y3QgYmNhY2hl
X29wcyBub19zY19vcHMgPSB7DQoJKHZvaWQgKilub19zY19ub29wLCAodm9p
ZCAqKW5vX3NjX25vb3AsDQoJKHZvaWQgKilub19zY19ub29wLCAodm9pZCAq
KW5vX3NjX25vb3ANCn07DQpzdHJ1Y3QgYmNhY2hlX29wcyAqYmNvcHMgPSAm
bm9fc2Nfb3BzOw0KDQovLyBDbGVhbiBhbGwgdmlydHVhbGx5IGluZGV4ZWQg
Y2FjaGVzDQpzdGF0aWMgaW5saW5lIHZvaWQgc3I3MTAwMF9mbHVzaF9jYWNo
ZV9hbGxfcGModm9pZCkNCnsNCgl1bnNpZ25lZCBsb25nIGZsYWdzOw0KDQoJ
X19zYXZlX2FuZF9jbGkoZmxhZ3MpOw0KCWJsYXN0X2RjYWNoZSgpOyBibGFz
dF9pY2FjaGUoKTsNCglfX3Jlc3RvcmVfZmxhZ3MoZmxhZ3MpOw0KfQ0KDQov
LyBUaGlzIGNsZWFycyBhbGwgY2FjaGVzLiBJdCBpcyBvbmx5IHVzZWQgZnJv
bSBhIHN5c2NhbGwuLg0Kc3RhdGljIGlubGluZSB2b2lkIHNyNzEwMDBfbnVr
ZV9jYWNoZXModm9pZCkNCnsNCgl1bnNpZ25lZCBsb25nIGZsYWdzOw0KDQoJ
X19zYXZlX2FuZF9jbGkoZmxhZ3MpOw0KCWJsYXN0X2RjYWNoZSgpOyBibGFz
dF9pY2FjaGUoKTsgYmxhc3Rfc2NhY2hlKCk7DQoJaWYgKHRjYWNoZV9zaXpl
ICE9IDApDQoJCWJsYXN0X3RjYWNoZSgpOw0KCV9fcmVzdG9yZV9mbGFncyhm
bGFncyk7DQp9DQoNCi8qIFRoaXMgaXMgY2FsbGVkIHRvIGNsZWFuIG91dCBh
IHZpcnR1YWwgbWFwcGluZy4gV2Ugb25seSBuZWVkIHRvIGZsdXNoIHRoZQ0K
ICAgSSBhbmQgRCBjYWNoZXMgc2luY2UgdGhlIG90aGVyIHR3byBhcmUgcGh5
c2ljYWxseSB0YWdnZWQgKi8NCnN0YXRpYyB2b2lkIHNyNzEwMDBfZmx1c2hf
Y2FjaGVfcmFuZ2VfcGMoc3RydWN0IG1tX3N0cnVjdCAqbW0sDQoJCQkJICAg
ICB1bnNpZ25lZCBsb25nIHN0YXJ0LA0KCQkJCSAgICAgdW5zaWduZWQgbG9u
ZyBlbmQpDQp7DQoJaWYobW0tPmNvbnRleHQgIT0gMCkgew0KCQl1bnNpZ25l
ZCBsb25nIGZsYWdzOw0KDQojaWZkZWYgREVCVUdfQ0FDSEUNCgkJcHJpbnRr
KCJjcmFuZ2VbJWQsJTA4bHgsJTA4bHhdIiwgKGludCltbS0+Y29udGV4dCwg
c3RhcnQsIGVuZCk7DQojZW5kaWYNCgkJX19zYXZlX2FuZF9jbGkoZmxhZ3Mp
Ow0KCQlibGFzdF9kY2FjaGUoKTsgYmxhc3RfaWNhY2hlKCk7DQoJCV9fcmVz
dG9yZV9mbGFncyhmbGFncyk7DQoJfQ0KfQ0KDQovKg0KICogT24gYXJjaGl0
ZWN0dXJlcyBsaWtlIHRoZSBTcGFyYywgd2UgY291bGQgZ2V0IHJpZCBvZiBs
aW5lcyBpbg0KICogdGhlIGNhY2hlIGNyZWF0ZWQgb25seSBieSBhIGNlcnRh
aW4gY29udGV4dCwgYnV0IG9uIHRoZSBNSVBTDQogKiAoYW5kIGFjdHVhbGx5
IGNlcnRhaW4gU3BhcmMncykgd2UgY2Fubm90Lg0KICogQWdhaW4sIG9ubHkg
Y2xlYW4gdGhlIHZpcnR1YWxseSB0YWdnZWQgY2FjaGUuDQogKi8NCnN0YXRp
YyB2b2lkIHNyNzEwMDBfZmx1c2hfY2FjaGVfbW1fcGMoc3RydWN0IG1tX3N0
cnVjdCAqbW0pDQp7DQoJaWYobW0tPmNvbnRleHQgIT0gMCkgew0KI2lmZGVm
IERFQlVHX0NBQ0hFDQoJCXByaW50aygiY21tWyVkXSIsIChpbnQpbW0tPmNv
bnRleHQpOw0KI2VuZGlmDQoJCXNyNzEwMDBfZmx1c2hfY2FjaGVfYWxsX3Bj
KCk7DQoJfQ0KfQ0KDQpzdGF0aWMgdm9pZCBzcjcxMDAwX2ZsdXNoX2NhY2hl
X3BhZ2VfcGMoc3RydWN0IHZtX2FyZWFfc3RydWN0ICp2bWEsDQoJCQkJICAg
IHVuc2lnbmVkIGxvbmcgcGFnZSkNCnsNCglzdHJ1Y3QgbW1fc3RydWN0ICpt
bSA9IHZtYS0+dm1fbW07DQoJdW5zaWduZWQgbG9uZyBmbGFnczsNCglwZ2Rf
dCAqcGdkcDsNCglwbWRfdCAqcG1kcDsNCglwdGVfdCAqcHRlcDsNCg0KCS8q
DQoJICogSWYgb3duZXMgbm8gdmFsaWQgQVNJRCB5ZXQsIGNhbm5vdCBwb3Nz
aWJseSBoYXZlIGdvdHRlbg0KCSAqIHRoaXMgcGFnZSBpbnRvIHRoZSBjYWNo
ZS4NCgkgKi8NCglpZiAobW0tPmNvbnRleHQgPT0gMCkNCgkJcmV0dXJuOw0K
DQojaWZkZWYgREVCVUdfQ0FDSEUNCglwcmludGsoImNwYWdlWyVkLCUwOGx4
XSIsIChpbnQpbW0tPmNvbnRleHQsIHBhZ2UpOw0KI2VuZGlmDQoJX19zYXZl
X2FuZF9jbGkoZmxhZ3MpOw0KCXBhZ2UgJj0gUEFHRV9NQVNLOw0KCXBnZHAg
PSBwZ2Rfb2Zmc2V0KG1tLCBwYWdlKTsNCglwbWRwID0gcG1kX29mZnNldChw
Z2RwLCBwYWdlKTsNCglwdGVwID0gcHRlX29mZnNldChwbWRwLCBwYWdlKTsN
Cg0KCS8qDQoJICogSWYgdGhlIHBhZ2UgaXNuJ3QgbWFya2VkIHZhbGlkLCB0
aGUgcGFnZSBjYW5ub3QgcG9zc2libHkgYmUNCgkgKiBpbiB0aGUgY2FjaGUu
DQoJICovDQoJaWYgKCEocHRlX3ZhbCgqcHRlcCkgJiBfUEFHRV9WQUxJRCkp
DQoJCWdvdG8gb3V0Ow0KDQoJLyoNCgkgKiBEb2luZyBmbHVzaGVzIGZvciBh
bm90aGVyIEFTSUQgdGhhbiB0aGUgY3VycmVudCBvbmUgaXMNCgkgKiB0b28g
ZGlmZmljdWx0IHNpbmNlIE1pcHMzMiBjYWNoZXMgZG8gYSBUTEIgdHJhbnNs
YXRpb24NCgkgKiBmb3IgZXZlcnkgY2FjaGUgZmx1c2ggb3BlcmF0aW9uLiAg
U28gd2UgZG8gaW5kZXhlZCBmbHVzaGVzDQoJICogaW4gdGhhdCBjYXNlLCB3
aGljaCBkb2Vzbid0IG92ZXJseSBmbHVzaCB0aGUgY2FjaGUgdG9vIG11Y2gu
DQoJICovDQoJaWYgKG1tID09IGN1cnJlbnQtPmFjdGl2ZV9tbSkgew0KCQli
bGFzdF9kY2FjaGVfcGFnZShwYWdlKTsNCgl9IGVsc2Ugew0KCQkvKiBEbyBp
bmRleGVkIGZsdXNoLCB0b28gbXVjaCB3b3JrIHRvIGdldCB0aGUgKHBvc3Np
YmxlKQ0KCQkgKiB0bGIgcmVmaWxscyB0byB3b3JrIGNvcnJlY3RseS4NCgkJ
ICovDQoJCXBhZ2UgPSAoS1NFRzAgKyAocGFnZSAmIChkY2FjaGVfc2l6ZSAt
IDEpKSk7DQoJCWJsYXN0X2RjYWNoZV9wYWdlX2luZGV4ZWQocGFnZSk7DQoJ
fQ0Kb3V0Og0KCV9fcmVzdG9yZV9mbGFncyhmbGFncyk7DQp9DQoNCi8qIElm
IHRoZSBhZGRyZXNzZXMgcGFzc2VkIHRvIHRoZXNlIHJvdXRpbmVzIGFyZSB2
YWxpZCwgdGhleSBhcmUNCiAqIGVpdGhlcjoNCiAqDQogKiAxKSBJbiBLU0VH
MCwgc28gd2UgY2FuIGRvIGEgZGlyZWN0IGZsdXNoIG9mIHRoZSBwYWdlLg0K
ICogMikgSW4gS1NFRzIsIGFuZCBzaW5jZSBldmVyeSBwcm9jZXNzIGNhbiB0
cmFuc2xhdGUgdGhvc2UNCiAqICAgIGFkZHJlc3NlcyBhbGwgdGhlIHRpbWUg
aW4ga2VybmVsIG1vZGUgd2UgY2FuIGRvIGEgZGlyZWN0DQogKiAgICBmbHVz
aC4NCiAqIDMpIEluIEtTRUcxLCBubyBmbHVzaCBuZWNlc3NhcnkuDQogKi8N
CnN0YXRpYyB2b2lkIHNyNzEwMDBfZmx1c2hfcGFnZV90b19yYW1fcGMoc3Ry
dWN0IHBhZ2UgKnBhZ2UpDQp7DQoJYmxhc3RfZGNhY2hlX3BhZ2UoKHVuc2ln
bmVkIGxvbmcpcGFnZV9hZGRyZXNzKHBhZ2UpKTsNCn0NCg0KLyogSS1DYWNo
ZSBhbmQgRC1DYWNoZSBhcmUgc2VwZXJhdGUgYW5kIHZpcnR1YWxseSB0YWdn
ZWQsIHRoZXNlIG5lZWQgdG8NCiAgIGZsdXNoIHRoZW0gKi8NCnN0YXRpYyB2
b2lkIHNyNzEwMDBfZmx1c2hfaWNhY2hlX3JhbmdlKHVuc2lnbmVkIGxvbmcg
c3RhcnQsIHVuc2lnbmVkIGxvbmcgZW5kKQ0Kew0KCWZsdXNoX2NhY2hlX2Fs
bCgpOyAgLy8gb25seSBkb2VzIGkgYW5kIGQsIHByb2JhYmx5IGV4Y2Vzc2l2
ZQ0KfQ0KDQpzdGF0aWMgdm9pZCBzcjcxMDAwX2ZsdXNoX2ljYWNoZV9wYWdl
KHN0cnVjdCB2bV9hcmVhX3N0cnVjdCAqdm1hLA0KCQkJCSAgICAgc3RydWN0
IHBhZ2UgKnBhZ2UpDQp7DQoJaW50IGFkZHJlc3M7DQoNCglpZiAoISh2bWEt
PnZtX2ZsYWdzICYgVk1fRVhFQykpDQoJCXJldHVybjsNCg0KCWFkZHJlc3Mg
PSBLU0VHMCArICgodW5zaWduZWQgbG9uZylwYWdlX2FkZHJlc3MocGFnZSkg
JiBQQUdFX01BU0sgJiAoZGNhY2hlX3NpemUgLSAxKSk7DQoJYmxhc3RfaWNh
Y2hlX3BhZ2VfaW5kZXhlZChhZGRyZXNzKTsNCn0NCg0KLyogV3JpdGViYWNr
IGFuZCBpbnZhbGlkYXRlIHRoZSBwcmltYXJ5IGNhY2hlIGRjYWNoZSBiZWZv
cmUgRE1BLg0KICAgU2VlIGFzbS1taXBzL2lvLmggDQogKi8NCnN0YXRpYyB2
b2lkIHNyNzEwMDBfZG1hX2NhY2hlX3diYWNrX2ludl9zYyh1bnNpZ25lZCBs
b25nIGFkZHIsDQoJCQkJCSAgdW5zaWduZWQgbG9uZyBzaXplKQ0Kew0KCXVu
c2lnbmVkIGxvbmcgZW5kLCBhOw0KDQoJaWYgKHNpemUgPj0gc2NhY2hlX3Np
emUpIHsNCgkJc3I3MTAwMF9udWtlX2NhY2hlcygpOw0KCQlyZXR1cm47DQoJ
fQ0KDQoJYSA9IGFkZHIgJiB+KHNjX2xzaXplIC0gMSk7DQoJZW5kID0gKGFk
ZHIgKyBzaXplKSAmIH4oc2NfbHNpemUgLSAxKTsNCgl3aGlsZSAoMSkgew0K
CQlmbHVzaF9kY2FjaGVfbGluZShhKTsNCgkJZmx1c2hfc2NhY2hlX2xpbmUo
YSk7IC8vIEhpdF9Xcml0ZWJhY2tfSW52X1NEDQoJCWlmIChhID09IGVuZCkg
YnJlYWs7DQoJCWEgKz0gc2NfbHNpemU7DQoJfQ0KfQ0KDQpzdGF0aWMgdm9p
ZCBzcjcxMDAwX2RtYV9jYWNoZV93YmFja19pbnZfdGModW5zaWduZWQgbG9u
ZyBhZGRyLA0KCQkJCQkgIHVuc2lnbmVkIGxvbmcgc2l6ZSkNCnsNCgl1bnNp
Z25lZCBsb25nIGVuZCwgYTsNCg0KCWEgPSBhZGRyICYgfihzY19sc2l6ZSAt
IDEpOw0KCWVuZCA9IChhZGRyICsgc2l6ZSkgJiB+KHNjX2xzaXplIC0gMSk7
DQoJd2hpbGUgKDEpIHsNCgkJZmx1c2hfZGNhY2hlX2xpbmUoYSk7DQoJCWZs
dXNoX3NjYWNoZV9saW5lKGEpOyAvLyBIaXRfV3JpdGViYWNrX0ludl9TRA0K
CQlmbHVzaF90Y2FjaGVfbGluZShhKTsgLy8gSGl0X0ludmFsaWRhdGVfVA0K
CQlpZiAoYSA9PSBlbmQpIGJyZWFrOw0KCQlhICs9IHNjX2xzaXplOw0KCX0N
Cn0NCg0KLyogSXQgaXMga2luZCBvZiBzaWxseSB0byB3cml0ZWJhY2sgZm9y
IHRoZSBpbnYgY2FzZS4uIE9oIHdlbGwgKi8NCnN0YXRpYyB2b2lkIHNyNzEw
MDBfZG1hX2NhY2hlX2ludl9zYyh1bnNpZ25lZCBsb25nIGFkZHIsIHVuc2ln
bmVkIGxvbmcgc2l6ZSkNCnsNCgl1bnNpZ25lZCBsb25nIGVuZCwgYTsNCg0K
CWlmIChzaXplID49IHNjYWNoZV9zaXplKSB7DQoJCXNyNzEwMDBfbnVrZV9j
YWNoZXMoKTsNCgkJcmV0dXJuOw0KCX0NCg0KCWEgPSBhZGRyICYgfihzY19s
c2l6ZSAtIDEpOw0KCWVuZCA9IChhZGRyICsgc2l6ZSkgJiB+KHNjX2xzaXpl
IC0gMSk7DQoJd2hpbGUgKDEpIHsNCgkJZmx1c2hfZGNhY2hlX2xpbmUoYSk7
DQoJCWZsdXNoX3NjYWNoZV9saW5lKGEpOyAvLyBIaXRfV3JpdGViYWNrX0lu
dl9TRCANCgkJaWYgKGEgPT0gZW5kKSBicmVhazsNCgkJYSArPSBzY19sc2l6
ZTsNCgl9DQp9DQoNCnN0YXRpYyB2b2lkIHNyNzEwMDBfZG1hX2NhY2hlX2lu
dl90Yyh1bnNpZ25lZCBsb25nIGFkZHIsIHVuc2lnbmVkIGxvbmcgc2l6ZSkN
CnsNCgl1bnNpZ25lZCBsb25nIGVuZCwgYTsNCg0KCWEgPSBhZGRyICYgfihz
Y19sc2l6ZSAtIDEpOw0KCWVuZCA9IChhZGRyICsgc2l6ZSkgJiB+KHNjX2xz
aXplIC0gMSk7DQoJd2hpbGUgKDEpIHsNCgkJZmx1c2hfZGNhY2hlX2xpbmUo
YSk7DQoJCWZsdXNoX3NjYWNoZV9saW5lKGEpOyAvLyBIaXRfV3JpdGViYWNr
X0ludl9TRA0KCQlmbHVzaF90Y2FjaGVfbGluZShhKTsgLy8gSGl0X0ludmFs
aWRhdGVfVA0KCQlpZiAoYSA9PSBlbmQpIGJyZWFrOw0KCQlhICs9IHNjX2xz
aXplOw0KCX0NCn0NCg0Kc3RhdGljIHZvaWQgc3I3MTAwMF9kbWFfY2FjaGVf
d2JhY2sodW5zaWduZWQgbG9uZyBhZGRyLCB1bnNpZ25lZCBsb25nIHNpemUp
DQp7DQoJcGFuaWMoInNyNzEwMDBfZG1hX2NhY2hlX3diYWNrIGNhbGxlZCAt
IHNob3VsZCBub3QgaGFwcGVuLiIpOw0KfQ0KDQovKg0KICogV2hpbGUgd2Un
cmUgcHJvdGVjdGVkIGFnYWluc3QgYmFkIHVzZXJsYW5kIGFkZHJlc3NlcyB3
ZSBkb24ndCBjYXJlDQogKiB2ZXJ5IG11Y2ggYWJvdXQgd2hhdCBoYXBwZW5z
IGluIHRoYXQgY2FzZS4gIFVzdWFsbHkgYSBzZWdtZW50YXRpb24NCiAqIGZh
dWx0IHdpbGwgZHVtcCB0aGUgcHJvY2VzcyBsYXRlciBvbiBhbnl3YXkgLi4u
DQogKi8NCnN0YXRpYyB2b2lkIHNyNzEwMDBfZmx1c2hfY2FjaGVfc2lndHJh
bXAodW5zaWduZWQgbG9uZyBhZGRyKQ0Kew0KCXByb3RlY3RlZF93cml0ZWJh
Y2tfZGNhY2hlX2xpbmUoYWRkciAmIH4oZGNfbHNpemUgLSAxKSk7DQoJcHJv
dGVjdGVkX2ZsdXNoX2ljYWNoZV9saW5lKGFkZHIgJiB+KGljX2xzaXplIC0g
MSkpOw0KfQ0KDQovKiBEZXRlY3QgYW5kIHNpemUgdGhlIHZhcmlvdXMgY2Fj
aGVzLiAqLw0Kc3RhdGljIHZvaWQgX19pbml0IHByb2JlX2ljYWNoZSh1bnNp
Z25lZCBsb25nIGNvbmZpZyx1bnNpZ25lZCBsb25nIGNvbmZpZzEpDQp7DQoJ
dW5zaWduZWQgaW50IGxzaXplOw0KDQoJY29uZmlnMSA9IHJlYWRfbWlwczMy
X2NwMF9jb25maWcxKCk7IA0KCQ0KCWlmICgobHNpemUgPSAoKGNvbmZpZzEg
Pj4gMTkpICYgNykpKQ0KCQltaXBzX2NwdS5pY2FjaGUubGluZXN6ID0gMiA8
PCBsc2l6ZTsNCgllbHNlIA0KCQltaXBzX2NwdS5pY2FjaGUubGluZXN6ID0g
bHNpemU7DQoJbWlwc19jcHUuaWNhY2hlLnNldHMgPSA2NCA8PCAoKGNvbmZp
ZzEgPj4gMjIpICYgNyk7DQoJbWlwc19jcHUuaWNhY2hlLndheXMgPSAxICsg
KChjb25maWcxID4+IDE2KSAmIDcpOw0KCQ0KCWljX2xzaXplID0gbWlwc19j
cHUuaWNhY2hlLmxpbmVzejsNCglpY2FjaGVfc2l6ZSA9IG1pcHNfY3B1Lmlj
YWNoZS5zZXRzICogbWlwc19jcHUuaWNhY2hlLndheXMgKiANCgkJaWNfbHNp
emU7DQoJcHJpbnRrKCJQcmltYXJ5IGluc3RydWN0aW9uIGNhY2hlICVka2Is
IGxpbmVzaXplICVkIGJ5dGVzICglZCB3YXlzKVxuIiwNCgkgICAgICAgaWNh
Y2hlX3NpemUgPj4gMTAsIGljX2xzaXplLCBtaXBzX2NwdS5pY2FjaGUud2F5
cyk7DQp9DQoNCnN0YXRpYyB2b2lkIF9faW5pdCBwcm9iZV9kY2FjaGUodW5z
aWduZWQgbG9uZyBjb25maWcsdW5zaWduZWQgbG9uZyBjb25maWcxKQ0Kew0K
CXVuc2lnbmVkIGludCBsc2l6ZTsNCg0KCWlmICgobHNpemUgPSAoKGNvbmZp
ZzEgPj4gMTApICYgNykpKQ0KCQltaXBzX2NwdS5kY2FjaGUubGluZXN6ID0g
MiA8PCBsc2l6ZTsNCgllbHNlIA0KCQltaXBzX2NwdS5kY2FjaGUubGluZXN6
ID0gbHNpemU7DQoJbWlwc19jcHUuZGNhY2hlLnNldHMgPSA2NCA8PCAoKGNv
bmZpZzEgPj4gMTMpICYgNyk7DQoJbWlwc19jcHUuZGNhY2hlLndheXMgPSAx
ICsgKChjb25maWcxID4+IDcpICYgNyk7DQoJDQoJZGNfbHNpemUgPSBtaXBz
X2NwdS5kY2FjaGUubGluZXN6Ow0KCWRjYWNoZV9zaXplID0gDQoJCW1pcHNf
Y3B1LmRjYWNoZS5zZXRzICogbWlwc19jcHUuZGNhY2hlLndheXMNCgkJKiBk
Y19sc2l6ZTsNCglwcmludGsoIlByaW1hcnkgZGF0YSBjYWNoZSAlZGtiLCBs
aW5lc2l6ZSAlZCBieXRlcyAoJWQgd2F5cylcbiIsDQoJICAgICAgIGRjYWNo
ZV9zaXplID4+IDEwLCBkY19sc2l6ZSwgbWlwc19jcHUuZGNhY2hlLndheXMp
Ow0KfQ0KDQpzdGF0aWMgdm9pZCBfX2luaXQgcHJvYmVfc2NhY2hlKHVuc2ln
bmVkIGxvbmcgY29uZmlnLHVuc2lnbmVkIGxvbmcgY29uZmlnMikNCnsNCgl1
bnNpZ25lZCBpbnQgbHNpemU7DQoNCglpZiAoKGxzaXplID0gKChjb25maWcy
ID4+IDQpICYgNykpKQ0KCQltaXBzX2NwdS5zY2FjaGUubGluZXN6ID0gMiA8
PCBsc2l6ZTsNCgllbHNlIA0KCQltaXBzX2NwdS5zY2FjaGUubGluZXN6ID0g
bHNpemU7DQoJDQoJbWlwc19jcHUuc2NhY2hlLnNldHMgPSA2NCA8PCAoKGNv
bmZpZzIgPj4gOCkgJiA3KTsNCgltaXBzX2NwdS5zY2FjaGUud2F5cyA9IDEg
KyAoKGNvbmZpZzIgPj4gMCkgJiA3KTsNCg0KCXNjX2xzaXplID0gbWlwc19j
cHUuc2NhY2hlLmxpbmVzejsNCglzY2FjaGVfc2l6ZSA9IG1pcHNfY3B1LnNj
YWNoZS5zZXRzICogbWlwc19jcHUuc2NhY2hlLndheXMgKiBzY19sc2l6ZTsN
CgkNCglwcmludGsoIlNlY29uZGFyeSBjYWNoZSAlZEssIGxpbmVzaXplICVk
IGJ5dGVzICglZCB3YXlzKVxuIiwNCgkgICAgICAgc2NhY2hlX3NpemUgPj4g
MTAsIHNjX2xzaXplLCBtaXBzX2NwdS5zY2FjaGUud2F5cyk7DQp9DQoNCnN0
YXRpYyB2b2lkIF9faW5pdCBwcm9iZV90Y2FjaGUodW5zaWduZWQgbG9uZyBj
b25maWcsdW5zaWduZWQgbG9uZyBjb25maWcyKQ0Kew0KCXVuc2lnbmVkIGlu
dCBsc2l6ZTsNCg0KCS8qIEZpcm13YXJlIG9yIHByb21faW5pdCBpcyByZXF1
aXJlZCB0byBjb25maWd1cmUgdGhlIHNpemUgb2YgdGhlIA0KCSAgIHRlcnRp
YXJ5IGNhY2hlIGluIGNvbmZpZzIgYW5kIHNldCB0aGUgVEUgYml0IGluIGNv
bmZpZzIgdG8gc2lnbmFsIA0KCSAgIHRoZSBleHRlcm5hbCBTUkFNIGNoaXBz
IGFyZSBwcmVzZW50LiAqLw0KCWlmICgoY29uZmlnMiAmICgxPDwyOCkpID09
IDApDQoJCXJldHVybjsNCgkNCglpZiAoKGxzaXplID0gKChjb25maWcyID4+
IDIwKSAmIDcpKSkNCgkJbWlwc19jcHUudGNhY2hlLmxpbmVzeiA9IDIgPDwg
bHNpemU7DQoJZWxzZSANCgkJbWlwc19jcHUudGNhY2hlLmxpbmVzeiA9IGxz
aXplOw0KCQ0KCW1pcHNfY3B1LnRjYWNoZS5zZXRzID0gNjQgPDwgKChjb25m
aWcyID4+IDI0KSAmIDcpOw0KCW1pcHNfY3B1LnRjYWNoZS53YXlzID0gMSAr
ICgoY29uZmlnMiA+PiAxNikgJiA3KTsNCg0KCXRjX2xzaXplID0gbWlwc19j
cHUudGNhY2hlLmxpbmVzejsNCgl0Y2FjaGVfc2l6ZSA9IG1pcHNfY3B1LnRj
YWNoZS5zZXRzICogbWlwc19jcHUudGNhY2hlLndheXMgKiB0Y19sc2l6ZTsN
CgkNCglwcmludGsoIlRlcnRpYXJ5IGNhY2hlICVkSywgbGluZXNpemUgJWQg
Ynl0ZXMsIGJsb2Nrc2l6ZSAlZCAiDQoJICAgICAgICJieXRlcyAoJWQgd2F5
cylcbiIsDQoJICAgICAgIHRjYWNoZV9zaXplID4+IDEwLCBzY19sc2l6ZSwg
dGNfbHNpemUsIG1pcHNfY3B1LnRjYWNoZS53YXlzKTsNCn0NCg0Kc3RhdGlj
IHZvaWQgX19pbml0IHNldHVwX3NjYWNoZV9mdW5jcyh2b2lkKQ0Kew0KICAg
ICAgICBfZmx1c2hfY2FjaGVfYWxsID0gc3I3MTAwMF9mbHVzaF9jYWNoZV9h
bGxfcGM7DQogICAgICAgIF9fX2ZsdXNoX2NhY2hlX2FsbCA9IHNyNzEwMDBf
bnVrZV9jYWNoZXM7DQoJX2ZsdXNoX2NhY2hlX21tID0gc3I3MTAwMF9mbHVz
aF9jYWNoZV9tbV9wYzsNCglfZmx1c2hfY2FjaGVfcmFuZ2UgPSBzcjcxMDAw
X2ZsdXNoX2NhY2hlX3JhbmdlX3BjOw0KCV9mbHVzaF9jYWNoZV9wYWdlID0g
c3I3MTAwMF9mbHVzaF9jYWNoZV9wYWdlX3BjOw0KCV9mbHVzaF9wYWdlX3Rv
X3JhbSA9IHNyNzEwMDBfZmx1c2hfcGFnZV90b19yYW1fcGM7DQoNCiAgICAg
ICAgLy8gVGhlc2UgY2FuIG9ubHkgYmUgZG9uZSBvbiB0aGUgcHJpbWFyeSBj
YWNoZS4NCglfY2xlYXJfcGFnZSA9ICh2b2lkICopbWlwczMyX2NsZWFyX3Bh
Z2VfZGM7DQoJX2NvcHlfcGFnZSA9ICh2b2lkICopbWlwczMyX2NvcHlfcGFn
ZV9kYzsNCg0KCV9mbHVzaF9pY2FjaGVfcGFnZSA9IHNyNzEwMDBfZmx1c2hf
aWNhY2hlX3BhZ2U7DQoNCglpZiAodGNhY2hlX3NpemUgPT0gMCkNCgl7DQoJ
CV9kbWFfY2FjaGVfd2JhY2tfaW52ID0gc3I3MTAwMF9kbWFfY2FjaGVfd2Jh
Y2tfaW52X3NjOw0KCQlfZG1hX2NhY2hlX2ludiA9IHNyNzEwMDBfZG1hX2Nh
Y2hlX2ludl9zYzsNCgl9DQoJZWxzZQ0KCXsNCgkJX2RtYV9jYWNoZV93YmFj
a19pbnYgPSBzcjcxMDAwX2RtYV9jYWNoZV93YmFja19pbnZfdGM7DQoJCV9k
bWFfY2FjaGVfaW52ID0gc3I3MTAwMF9kbWFfY2FjaGVfaW52X3RjOw0KCX0N
CgkJDQoJX2RtYV9jYWNoZV93YmFjayA9IHNyNzEwMDBfZG1hX2NhY2hlX3di
YWNrOw0KfQ0KDQovKiBUaGlzIGltcGxlbWVudHMgdGhlIGNhY2hlIGludGlh
bGl6YXRpb24gc3R1ZmYgZnJvbSB0aGUgU1I3MTAwMCBndWlkZS4gQWZ0ZXIN
CiAgIHRoaXMgYWxsIHRoZSBjYWNoZXMgd2lsbCBiZSBlbXB0eSBhbmQgcmVh
ZHkgdG8gcnVuLiBJdCBtdXN0IGJlIHJ1biBmcm9tDQogICB1bmNhY2hlZCBz
cGFjZS4gKi8NCnN0YXRpYyB2b2lkIF9faW5pdCBjbGVhcl9lbmFibGVfY2Fj
aGVzKHVuc2lnbmVkIGxvbmcgY29uZmlnKQ0Kew0KCWNvbmZpZyA9IChjb25m
aWcgJiAofkNPTkZfQ01fQ01BU0spKSB8IENPTkZfQ01fQ0FDSEFCTEVfTk9O
Q09IRVJFTlQ7DQoJDQoJLyogUHJpbWFyeSBjYWNoZSBpbml0ICg3LjEuMSkN
CgkgICBTUjcxMDAwIFByaW1hcnkgQ2FjaGUgaW5pdGlhbGl6YXRpb24gb2Yg
NC13YXksIDMyIEtieXRlIGxpbmUgSS9EIA0KCSAgIGNhY2hlcy4gKi8NCglf
X2FzbV9fIF9fdm9sYXRpbGVfXyANCgkJKA0KCQkgIi5zZXQgcHVzaFxuIg0K
CQkgIi5zZXQgbm9yZW9yZGVyXG4iDQoJCSAiLnNldCBub2F0XG4iDQoJCSAi
LnNldCBtaXBzNjRcbiINCgkJIA0KCQkgLy8gRW5hYmxlIEtTRUcwIGNhY2hp
bmcNCgkJICIgbXRjMCAlMCwgJDE2XG4iDQoJCSANCgkJIC8qIEl0IGlzIHJl
Y29tbWVuZGVkIHRoYXQgcGFyaXR5IGJlIGRpc2FibGVkIGR1cmluZyBjYWNo
ZSANCgkJICAgIGluaXRpYWxpemF0aW9uLiAqLw0KCQkgIiBtZmMwICQxLCAk
MTJcbiIgICAgICAvLyBSZWFkIENQMCBTdGF0dXMgUmVnaXN0ZXIuDQoJCSAi
IGxpICQyLCAweDAwMDEwMDAwXG4iIC8vIERFIEJpdC4NCgkJICIgb3IgJDIs
ICQxLCAkMlxuIg0KCQkgIiBtdGMwICQyLCAkMTJcbiIgICAgIC8vIERpc2Fi
bGUgUGFyaXR5Lg0KCQkgDQoJCSAiIG9yaSAkMywgJTEsIDB4MUZFMFxuIiAv
LyAyNTYgc2V0cy4NCgkJICIgbXRjMCAkMCwgJDI4XG4iIC8vIFNldCBDUDAg
VGFnX0xvIFJlZ2lzdGVyDQoJCSAiMTpcbiINCgkJICIgY2FjaGUgOCwgMHgw
MDAwKCQzKVxuIiAvLyBJbmRleF9TdG9yZV9UYWdfSQ0KCQkgIiBjYWNoZSA4
LCAweDIwMDAoJDMpXG4iIC8vIEluZGV4X1N0b3JlX1RhZ19JDQoJCSAiIGNh
Y2hlIDgsIDB4NDAwMCgkMylcbiIgLy8gSW5kZXhfU3RvcmVfVGFnX0kNCgkJ
ICIgY2FjaGUgOCwgMHg2MDAwKCQzKVxuIiAvLyBJbmRleF9TdG9yZV9UYWdf
SQ0KCQkgIiBjYWNoZSA5LCAweDAwMDAoJDMpXG4iIC8vIEluZGV4X1N0b3Jl
X1RhZ19EDQoJCSAiIGNhY2hlIDksIDB4MjAwMCgkMylcbiIgLy8gSW5kZXhf
U3RvcmVfVGFnX0QNCgkJICIgY2FjaGUgOSwgMHg0MDAwKCQzKVxuIiAvLyBJ
bmRleF9TdG9yZV9UYWdfRA0KCQkgIiBjYWNoZSA5LCAweDYwMDAoJDMpXG4i
IC8vIEluZGV4X1N0b3JlX1RhZ19EDQoJCSAiIGJuZSAkMywgJTEsIDFiXG4i
DQoJCSAiIGFkZGl1ICQzLCAkMywgLTB4MDAyMFxuIiAvLyAzMiBieXRlIGNh
Y2hlIGxpbmUNCgkJICIgbXRjMCAkMSwgJDEyXG4iIC8vIFB1dCBvcmlnaW5h
bCBiYWNrIGluIFN0YXR1cyBSZWdpc3Rlci4NCgkJICIuc2V0IHBvcFxuIg0K
CQkgOg0KCQkgOiAiciIoY29uZmlnKSwgInIiKEtTRUcwIHwgMHg5RkQwKSAv
LyBhcmJpdGFyeSBhZGRyZXNzDQoJCSA6ICIkMSIsIiQyIiwiJDMiKTsNCg0K
CS8qIFNlY29uZGFyeSBhbmQgdGVydGlhcnkgZmxhc2ggaW52YWxpZGF0ZSAo
Ny41LjE4KQkgICANCgkgICAgVGhpcyBjb2RlIGZyYWdtZW50LCBpbnZhbGlk
YXRlcyAoYWxzbyBkaXNhYmxlcyksIGFuZA0KCSAgICByZXN0b3JlcyAocmUt
ZW5hYmxlcykgdGhlIHNlY29uZGFyeSBhbmQgdGVydGlhcnkgY2FjaGVzLg0K
CSAgICBFbnN1cmUgc3lzdGVtIGlzIG9wZXJhdGluZyBpbiB1bmNhY2hlZCBz
cGFjZS4gKi8NCglfX2FzbV9fIF9fdm9sYXRpbGVfXyANCgkJICgNCgkJICIu
c2V0IHB1c2hcbiINCgkJICIuc2V0IG5vcmVvcmRlclxuIg0KCQkgIi5zZXQg
bm9hdFxuIg0KCQkgIi5zZXQgbWlwczY0XG4iDQoJCSAiICBzeW5jXG4iICAg
Ly8gZmx1c2ggY29yZSBwaXBlbGluZQ0KCQkgIiAgbHcgJDIsIDAoJTApXG4i
ICAgICAgICAgICAgIC8vIGZsdXNoIHBlbmRpbmcgYWNjZXNzZXMNCgkJICIg
IGJuZSAkMiwgJDIsIDFmXG4iICAgICAgICAgICAvLyBwcmV2ZW50IEktZmV0
Y2hlcw0KCQkgIiAgbm9wXG4iDQoJCSAiMTogbWZjMCAkMSwgJDE2LCAyXG4i
ICAgICAgICAvLyBzYXZlIGN1cnJlbnQgQ29uZmlnMg0KCQkgIiAgbGkgJDIs
IDB4MjAwMDIwMDBcbiIgICAgICAgIC8vIHNldCBmbGFzaCBpbnZhbGlkYXRp
b24gYml0cw0KCQkgIiAgb3IgJDIsICQxLCAkMlxuIg0KCQkgIiAgbXRjMCAk
MiwgJDE2LCAyXG4iIC8vIGludmFsaWRhdGUgJiBkaXNhYmxlIGNhY2hlcw0K
CQkgIiAgbXRjMCAkMSwgJDE2LCAyXG4iIC8vIHJlc3RvcmUgQ29uZmlnMg0K
CQkgIi5zZXQgcG9wXG4iDQoJCSA6DQoJCSA6ICJyIihLU0VHMSkNCgkJIDog
IiQxIiwiJDIiKTsJCSANCn0NCg0Kdm9pZCBfX2luaXQgbGRfbW11X3NyNzEw
MDAodm9pZCkNCnsNCgl1bnNpZ25lZCBsb25nIGNvbmZpZyA9IHJlYWRfMzJi
aXRfY3AwX3JlZ2lzdGVyeChDUDBfQ09ORklHLDApOw0KCXVuc2lnbmVkIGxv
bmcgY29uZmlnMSA9IHJlYWRfMzJiaXRfY3AwX3JlZ2lzdGVyeChDUDBfQ09O
RklHLDEpOw0KCXVuc2lnbmVkIGxvbmcgY29uZmlnMiA9IHJlYWRfMzJiaXRf
Y3AwX3JlZ2lzdGVyeChDUDBfQ09ORklHLDIpOw0KCXZvaWQgKCprc2VnMV9j
ZWMpKHVuc2lnbmVkIGxvbmcgY29uZmlnKSA9ICh2b2lkICopS1NFRzFBRERS
KCZjbGVhcl9lbmFibGVfY2FjaGVzKTsNCg0KCS8vIFNob3VsZCBuZXZlciBo
YXBwZW4NCiAgICAgICAgaWYgKCEoY29uZmlnICYgKDEgPDwgMzEpKSB8fCAh
KGNvbmZpZzEgJiAoMSA8PCAzMSkpKQ0KCQlwYW5pYygic3I3MTAwMCBkb2Vz
IG5vdCBoYXZlIG5lY2Vzc2FyeSBjb25maWcgcmVnaXN0ZXJzIik7DQoJDQoJ
cHJvYmVfaWNhY2hlKGNvbmZpZyxjb25maWcxKTsNCglwcm9iZV9kY2FjaGUo
Y29uZmlnLGNvbmZpZzEpOw0KCXByb2JlX3NjYWNoZShjb25maWcsY29uZmln
Mik7DQoJcHJvYmVfdGNhY2hlKGNvbmZpZyxjb25maWcyKTsNCglzZXR1cF9z
Y2FjaGVfZnVuY3MoKTsNCg0KCS8vIE1ha2Ugc3VyZSB0aGUgdGhlIHNlY29u
ZGFyeSBjYWNoZSBpcyB0dXJuZWQgb24gKGFsd2F5cyBwcmVzZW50KQ0KCXdy
aXRlXzMyYml0X2NwMF9yZWdpc3RlcngoQ1AwX0NPTkZJRywyLGNvbmZpZzIg
fCAoMTw8MTIpKTsNCgkNCiNpZm5kZWYgQ09ORklHX01JUFNfVU5DQUNIRUQN
CglpZiAoKGNvbmZpZyAmIENPTkZfQ01fQ01BU0spICE9IENPTkZfQ01fVU5D
QUNIRUQpDQogICAgICAgICAgICAgICAgcHJpbnRrKCJDYWNoZXMgYWxyZWFk
eSBlbmFibGVkLCBsZWF2aW5nIGFsb25lLi5cbiIpOw0KICAgICAgICBlbHNl
DQogICAgICAgICAgICAgICAga3NlZzFfY2VjKGNvbmZpZyk7DQojZW5kaWYN
CgkJCQkJCSAgDQoJX2ZsdXNoX2NhY2hlX3NpZ3RyYW1wID0gc3I3MTAwMF9m
bHVzaF9jYWNoZV9zaWd0cmFtcDsNCglfZmx1c2hfaWNhY2hlX3JhbmdlID0g
c3I3MTAwMF9mbHVzaF9pY2FjaGVfcmFuZ2U7DQp9DQo=
--1444446418-1735939474-1019002712=:18447--
